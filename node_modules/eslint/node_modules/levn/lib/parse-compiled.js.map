{"version":3,"sources":["parse.js"],"names":[],"mappings":"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","file":"parse-compiled.js","sourcesContent":["// Generated by LiveScript 1.2.0\n(function(){\n  var reject, special, tokenRegex;\n  reject = require('prelude-ls').reject;\n  function consumeOp(tokens, op){\n    if (tokens[0] === op) {\n      return tokens.shift();\n    } else {\n      throw new Error(\"Expected '\" + op + \"', but got '\" + tokens[0] + \"' instead in \" + JSON.stringify(tokens) + \".\");\n    }\n  }\n  function maybeConsumeOp(tokens, op){\n    if (tokens[0] === op) {\n      return tokens.shift();\n    }\n  }\n  function consumeList(tokens, delimiters, hasDelimiters){\n    var result;\n    if (hasDelimiters) {\n      consumeOp(tokens, delimiters[0]);\n    }\n    result = [];\n    while (tokens.length && tokens[0] !== delimiters[1]) {\n      result.push(consumeElement(tokens));\n      maybeConsumeOp(tokens, ',');\n    }\n    if (hasDelimiters) {\n      consumeOp(tokens, delimiters[1]);\n    }\n    return result;\n  }\n  function consumeArray(tokens, hasDelimiters){\n    return consumeList(tokens, ['[', ']'], hasDelimiters);\n  }\n  function consumeTuple(tokens, hasDelimiters){\n    return consumeList(tokens, ['(', ')'], hasDelimiters);\n  }\n  function consumeFields(tokens, hasDelimiters){\n    var result, key;\n    if (hasDelimiters) {\n      consumeOp(tokens, '{');\n    }\n    result = {};\n    while (tokens.length && (!hasDelimiters || tokens[0] !== '}')) {\n      key = tokens.shift();\n      consumeOp(tokens, ':');\n      result[key] = consumeElement(tokens);\n      maybeConsumeOp(tokens, ',');\n    }\n    if (hasDelimiters) {\n      consumeOp(tokens, '}');\n    }\n    return result;\n  }\n  function consumeElement(tokens){\n    switch (tokens[0]) {\n    case '[':\n      return consumeArray(tokens, true);\n    case '(':\n      return consumeTuple(tokens, true);\n    case '{':\n      return consumeFields(tokens, true);\n    default:\n      return tokens.shift();\n    }\n  }\n  function consumeTopLevel(tokens, types){\n    var ref$, type, structure, origTokens, result, finalResult, x$, y$;\n    ref$ = types[0], type = ref$.type, structure = ref$.structure;\n    origTokens = tokens.concat();\n    if (types.length === 1 && (structure || (type === 'Array' || type === 'Object'))) {\n      result = structure === 'array' || type === 'Array'\n        ? consumeArray(tokens, tokens[0] === '[')\n        : structure === 'tuple'\n          ? consumeTuple(tokens, tokens[0] === '(')\n          : consumeFields(tokens, tokens[0] === '{');\n      finalResult = tokens.length ? consumeElement(structure === 'array' || type === 'Array'\n        ? (x$ = origTokens, x$.unshift('['), x$.push(']'), x$)\n        : (y$ = origTokens, y$.unshift('('), y$.push(')'), y$)) : result;\n    } else {\n      finalResult = consumeElement(tokens);\n    }\n    if (tokens.length && origTokens.length) {\n      throw new Error(\"Unable to parse \" + JSON.stringify(origTokens) + \" of type \" + JSON.stringify(types) + \".\");\n    } else {\n      return finalResult;\n    }\n  }\n  special = /\\[\\]\\(\\)}{:,/.source;\n  tokenRegex = RegExp('(\"(?:[^\"]|\\\\\\\\\")*\")|(\\'(?:[^\\']|\\\\\\\\\\')*\\')|(#.*#)|(/(?:\\\\\\\\/|[^/])*/[gimy]*)|([' + special + '])|([^\\\\s' + special + ']+)|\\\\s*');\n  module.exports = function(string, types){\n    var tokens, node;\n    tokens = reject(function(it){\n      return !it || /^\\s+$/.test(it);\n    }, string.split(tokenRegex));\n    node = consumeTopLevel(tokens, types);\n    if (!node) {\n      throw new Error(\"Error parsing '\" + string + \"'.\");\n    }\n    return node;\n  };\n}).call(this);\n"]}