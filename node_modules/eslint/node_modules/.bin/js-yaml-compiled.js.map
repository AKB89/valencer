{"version":3,"sources":["js-yaml"],"names":[],"mappings":"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","file":"js-yaml-compiled.js","sourcesContent":["#!/usr/bin/env node\n\n\n'use strict';\n\n/*eslint-disable no-console*/\n\n\n// stdlib\nvar fs    = require('fs');\n\n\n// 3rd-party\nvar argparse = require('argparse');\n\n\n// internal\nvar yaml = require('..');\n\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar cli = new argparse.ArgumentParser({\n  prog:     'js-yaml',\n  version:  require('../package.json').version,\n  addHelp:  true\n});\n\n\ncli.addArgument([ '-c', '--compact' ], {\n  help:   'Display errors in compact mode',\n  action: 'storeTrue'\n});\n\n\n// deprecated (not needed after we removed output colors)\n// option suppressed, but not completely removed for compatibility\ncli.addArgument([ '-j', '--to-json' ], {\n  help:   argparse.Const.SUPPRESS,\n  dest:   'json',\n  action: 'storeTrue'\n});\n\n\ncli.addArgument([ '-t', '--trace' ], {\n  help:   'Show stack trace on error',\n  action: 'storeTrue'\n});\n\ncli.addArgument([ 'file' ], {\n  help:   'File to read, utf-8 encoded without BOM',\n  nargs:  '?',\n  defaultValue: '-'\n});\n\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar options = cli.parseArgs();\n\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction readFile(filename, encoding, callback) {\n  if (options.file === '-') {\n    // read from stdin\n\n    var chunks = [];\n\n    process.stdin.on('data', function (chunk) {\n      chunks.push(chunk);\n    });\n\n    process.stdin.on('end', function () {\n      return callback(null, Buffer.concat(chunks).toString(encoding));\n    });\n  } else {\n    fs.readFile(filename, encoding, callback);\n  }\n}\n\nreadFile(options.file, 'utf8', function (error, input) {\n  var output, isYaml;\n\n  if (error) {\n    if (error.code === 'ENOENT') {\n      console.error('File not found: ' + options.file);\n      process.exit(2);\n    }\n\n    console.error(\n      options.trace && error.stack ||\n      error.message ||\n      String(error));\n\n    process.exit(1);\n  }\n\n  try {\n    output = JSON.parse(input);\n    isYaml = false;\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      try {\n        output = [];\n        yaml.loadAll(input, function (doc) { output.push(doc); }, {});\n        isYaml = true;\n\n        if (output.length === 0) output = null;\n        else if (output.length === 1) output = output[0];\n\n      } catch (e) {\n        if (options.trace && err.stack) console.error(e.stack);\n        else console.error(e.toString(options.compact));\n\n        process.exit(1);\n      }\n    } else {\n      console.error(\n        options.trace && err.stack ||\n        err.message ||\n        String(err));\n\n      process.exit(1);\n    }\n  }\n\n  if (isYaml) console.log(JSON.stringify(output, null, '  '));\n  else console.log(yaml.dump(output));\n});\n"]}