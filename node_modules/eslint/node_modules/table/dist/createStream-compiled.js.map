{"version":3,"sources":["createStream.js"],"names":[],"mappings":"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","file":"createStream-compiled.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _mapValues2 = require('lodash/mapValues');\n\nvar _mapValues3 = _interopRequireDefault(_mapValues2);\n\nvar _trimEnd2 = require('lodash/trimEnd');\n\nvar _trimEnd3 = _interopRequireDefault(_trimEnd2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _makeStreamConfig = require('./makeStreamConfig');\n\nvar _makeStreamConfig2 = _interopRequireDefault(_makeStreamConfig);\n\nvar _drawRow = require('./drawRow');\n\nvar _drawRow2 = _interopRequireDefault(_drawRow);\n\nvar _drawBorder = require('./drawBorder');\n\nvar _stringifyTableData = require('./stringifyTableData');\n\nvar _stringifyTableData2 = _interopRequireDefault(_stringifyTableData);\n\nvar _truncateTableData = require('./truncateTableData');\n\nvar _truncateTableData2 = _interopRequireDefault(_truncateTableData);\n\nvar _mapDataUsingRowHeightIndex = require('./mapDataUsingRowHeightIndex');\n\nvar _mapDataUsingRowHeightIndex2 = _interopRequireDefault(_mapDataUsingRowHeightIndex);\n\nvar _alignTableData = require('./alignTableData');\n\nvar _alignTableData2 = _interopRequireDefault(_alignTableData);\n\nvar _padTableData = require('./padTableData');\n\nvar _padTableData2 = _interopRequireDefault(_padTableData);\n\nvar _calculateRowHeightIndex = require('./calculateRowHeightIndex');\n\nvar _calculateRowHeightIndex2 = _interopRequireDefault(_calculateRowHeightIndex);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar append = undefined,\n    create = undefined,\n    prepareData = undefined;\n\n/**\n * @param {string[]} row\n * @param {number[]} columnWidthIndex\n * @param {Object} config\n * @returns {undefined}\n */\ncreate = function create(row, columnWidthIndex, config) {\n    var body = undefined,\n        output = undefined,\n        rows = undefined;\n\n    rows = prepareData([row], config);\n\n    body = (0, _map3.default)(rows, function (literalRow) {\n        return (0, _drawRow2.default)(literalRow, config.border);\n    }).join('');\n\n    output = '';\n    output += (0, _drawBorder.drawBorderTop)(columnWidthIndex, config.border);\n    output += body;\n    output += (0, _drawBorder.drawBorderBottom)(columnWidthIndex, config.border);\n\n    output = (0, _trimEnd3.default)(output);\n\n    process.stdout.write(output);\n};\n\n/**\n * @param {string[]} row\n * @param {number[]} columnWidthIndex\n * @param {Object} config\n * @returns {undefined}\n */\nappend = function append(row, columnWidthIndex, config) {\n    var body = undefined,\n        output = undefined,\n        rows = undefined;\n\n    rows = prepareData([row], config);\n\n    // console.log('rows', rows);\n\n    body = (0, _map3.default)(rows, function (literalRow) {\n        return (0, _drawRow2.default)(literalRow, config.border);\n    }).join('');\n\n    output = '\\r\\x1b[K';\n    output += (0, _drawBorder.drawBorderJoin)(columnWidthIndex, config.border);\n    output += body;\n    output += (0, _drawBorder.drawBorderBottom)(columnWidthIndex, config.border);\n\n    output = (0, _trimEnd3.default)(output);\n\n    process.stdout.write(output);\n};\n\n/**\n * @param {Array} data\n * @param {Object} config\n * @returns {Array}\n */\nprepareData = function prepareData(data, config) {\n    var rowHeightIndex = undefined,\n        rows = undefined;\n\n    rows = (0, _stringifyTableData2.default)(data);\n\n    rows = (0, _truncateTableData2.default)(data, config);\n\n    rowHeightIndex = (0, _calculateRowHeightIndex2.default)(rows, config);\n\n    rows = (0, _mapDataUsingRowHeightIndex2.default)(rows, rowHeightIndex, config);\n    rows = (0, _alignTableData2.default)(rows, config);\n    rows = (0, _padTableData2.default)(rows, config);\n\n    return rows;\n};\n\n/**\n * @param {Object} userConfig\n * @return {Object}\n */\n\nexports.default = function () {\n    var userConfig = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var columnWidthIndex = undefined,\n        config = undefined,\n        empty = undefined;\n\n    config = (0, _makeStreamConfig2.default)(userConfig);\n\n    columnWidthIndex = (0, _mapValues3.default)(config.columns, function (column) {\n        return column.width + column.paddingLeft + column.paddingRight;\n    });\n\n    empty = true;\n\n    return {\n        /**\n         * @param {string[]} row\n         * @returns {undefined}\n         */\n        write: function write(row) {\n            if (row.length !== config.columnCount) {\n                throw new Error('Row cell count does not match the config.columnCount.');\n            }\n\n            if (empty) {\n                empty = false;\n\n                return create(row, columnWidthIndex, config);\n            } else {\n                return append(row, columnWidthIndex, config);\n            }\n        }\n    };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=createStream.js.map\n"]}