{"version":3,"sources":["tv4.js"],"names":[],"mappings":"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","file":"tv4-compiled.js","sourcesContent":["/*\nAuthor: Geraint Luff and others\nYear: 2013\n\nThis code is released into the \"public domain\" by its author(s).  Anybody may use, alter and distribute the code without restriction.  The author makes no guarantees, and takes no liability of any kind for use of this code.\n\nIf you find a bug or make an improvement, it would be courteous to let the author know, but it is not compulsory.\n*/\n(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof module !== 'undefined' && module.exports){\n    // CommonJS. Define export.\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.tv4 = factory();\n  }\n}(this, function () {\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FObject%2Fkeys\nif (!Object.keys) {\n\tObject.keys = (function () {\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty,\n\t\t\thasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n\t\t\tdontEnums = [\n\t\t\t\t'toString',\n\t\t\t\t'toLocaleString',\n\t\t\t\t'valueOf',\n\t\t\t\t'hasOwnProperty',\n\t\t\t\t'isPrototypeOf',\n\t\t\t\t'propertyIsEnumerable',\n\t\t\t\t'constructor'\n\t\t\t],\n\t\t\tdontEnumsLength = dontEnums.length;\n\n\t\treturn function (obj) {\n\t\t\tif (typeof obj !== 'object' && typeof obj !== 'function' || obj === null) {\n\t\t\t\tthrow new TypeError('Object.keys called on non-object');\n\t\t\t}\n\n\t\t\tvar result = [];\n\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (hasOwnProperty.call(obj, prop)) {\n\t\t\t\t\tresult.push(prop);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasDontEnumBug) {\n\t\t\t\tfor (var i=0; i < dontEnumsLength; i++) {\n\t\t\t\t\tif (hasOwnProperty.call(obj, dontEnums[i])) {\n\t\t\t\t\t\tresult.push(dontEnums[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t})();\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\nif (!Object.create) {\n\tObject.create = (function(){\n\t\tfunction F(){}\n\n\t\treturn function(o){\n\t\t\tif (arguments.length !== 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\t})();\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FisArray\nif(!Array.isArray) {\n\tArray.isArray = function (vArg) {\n\t\treturn Object.prototype.toString.call(vArg) === \"[object Array]\";\n\t};\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FindexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n\t\tif (this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\n\t\tif (len === 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar n = 0;\n\t\tif (arguments.length > 1) {\n\t\t\tn = Number(arguments[1]);\n\t\t\tif (n !== n) { // shortcut for verifying if it's NaN\n\t\t\t\tn = 0;\n\t\t\t} else if (n !== 0 && n !== Infinity && n !== -Infinity) {\n\t\t\t\tn = (n > 0 || -1) * Math.floor(Math.abs(n));\n\t\t\t}\n\t\t}\n\t\tif (n >= len) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\t\tfor (; k < len; k++) {\n\t\t\tif (k in t && t[k] === searchElement) {\n\t\t\t\treturn k;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n}\n\n// Grungey Object.isFrozen hack\nif (!Object.isFrozen) {\n\tObject.isFrozen = function (obj) {\n\t\tvar key = \"tv4_test_frozen_key\";\n\t\twhile (obj.hasOwnProperty(key)) {\n\t\t\tkey += Math.random();\n\t\t}\n\t\ttry {\n\t\t\tobj[key] = true;\n\t\t\tdelete obj[key];\n\t\t\treturn false;\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t};\n}\n// Based on: https://github.com/geraintluff/uri-templates, but with all the de-substitution stuff removed\n\nvar uriTemplateGlobalModifiers = {\n\t\"+\": true,\n\t\"#\": true,\n\t\".\": true,\n\t\"/\": true,\n\t\";\": true,\n\t\"?\": true,\n\t\"&\": true\n};\nvar uriTemplateSuffices = {\n\t\"*\": true\n};\n\nfunction notReallyPercentEncode(string) {\n\treturn encodeURI(string).replace(/%25[0-9][0-9]/g, function (doubleEncoded) {\n\t\treturn \"%\" + doubleEncoded.substring(3);\n\t});\n}\n\nfunction uriTemplateSubstitution(spec) {\n\tvar modifier = \"\";\n\tif (uriTemplateGlobalModifiers[spec.charAt(0)]) {\n\t\tmodifier = spec.charAt(0);\n\t\tspec = spec.substring(1);\n\t}\n\tvar separator = \"\";\n\tvar prefix = \"\";\n\tvar shouldEscape = true;\n\tvar showVariables = false;\n\tvar trimEmptyString = false;\n\tif (modifier === '+') {\n\t\tshouldEscape = false;\n\t} else if (modifier === \".\") {\n\t\tprefix = \".\";\n\t\tseparator = \".\";\n\t} else if (modifier === \"/\") {\n\t\tprefix = \"/\";\n\t\tseparator = \"/\";\n\t} else if (modifier === '#') {\n\t\tprefix = \"#\";\n\t\tshouldEscape = false;\n\t} else if (modifier === ';') {\n\t\tprefix = \";\";\n\t\tseparator = \";\";\n\t\tshowVariables = true;\n\t\ttrimEmptyString = true;\n\t} else if (modifier === '?') {\n\t\tprefix = \"?\";\n\t\tseparator = \"&\";\n\t\tshowVariables = true;\n\t} else if (modifier === '&') {\n\t\tprefix = \"&\";\n\t\tseparator = \"&\";\n\t\tshowVariables = true;\n\t}\n\n\tvar varNames = [];\n\tvar varList = spec.split(\",\");\n\tvar varSpecs = [];\n\tvar varSpecMap = {};\n\tfor (var i = 0; i < varList.length; i++) {\n\t\tvar varName = varList[i];\n\t\tvar truncate = null;\n\t\tif (varName.indexOf(\":\") !== -1) {\n\t\t\tvar parts = varName.split(\":\");\n\t\t\tvarName = parts[0];\n\t\t\ttruncate = parseInt(parts[1], 10);\n\t\t}\n\t\tvar suffices = {};\n\t\twhile (uriTemplateSuffices[varName.charAt(varName.length - 1)]) {\n\t\t\tsuffices[varName.charAt(varName.length - 1)] = true;\n\t\t\tvarName = varName.substring(0, varName.length - 1);\n\t\t}\n\t\tvar varSpec = {\n\t\t\ttruncate: truncate,\n\t\t\tname: varName,\n\t\t\tsuffices: suffices\n\t\t};\n\t\tvarSpecs.push(varSpec);\n\t\tvarSpecMap[varName] = varSpec;\n\t\tvarNames.push(varName);\n\t}\n\tvar subFunction = function (valueFunction) {\n\t\tvar result = \"\";\n\t\tvar startIndex = 0;\n\t\tfor (var i = 0; i < varSpecs.length; i++) {\n\t\t\tvar varSpec = varSpecs[i];\n\t\t\tvar value = valueFunction(varSpec.name);\n\t\t\tif (value === null || value === undefined || (Array.isArray(value) && value.length === 0) || (typeof value === 'object' && Object.keys(value).length === 0)) {\n\t\t\t\tstartIndex++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (i === startIndex) {\n\t\t\t\tresult += prefix;\n\t\t\t} else {\n\t\t\t\tresult += (separator || \",\");\n\t\t\t}\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tif (showVariables) {\n\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t}\n\t\t\t\tfor (var j = 0; j < value.length; j++) {\n\t\t\t\t\tif (j > 0) {\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\n\t\t\t\t\t\tif (varSpec.suffices['*'] && showVariables) {\n\t\t\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[j]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[j]);\n\t\t\t\t}\n\t\t\t} else if (typeof value === \"object\") {\n\t\t\t\tif (showVariables && !varSpec.suffices['*']) {\n\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t}\n\t\t\t\tvar first = true;\n\t\t\t\tfor (var key in value) {\n\t\t\t\t\tif (!first) {\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\n\t\t\t\t\t}\n\t\t\t\t\tfirst = false;\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(key).replace(/!/g, \"%21\") : notReallyPercentEncode(key);\n\t\t\t\t\tresult += varSpec.suffices['*'] ? '=' : \",\";\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[key]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[key]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (showVariables) {\n\t\t\t\t\tresult += varSpec.name;\n\t\t\t\t\tif (!trimEmptyString || value !== \"\") {\n\t\t\t\t\t\tresult += \"=\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (varSpec.truncate != null) {\n\t\t\t\t\tvalue = value.substring(0, varSpec.truncate);\n\t\t\t\t}\n\t\t\t\tresult += shouldEscape ? encodeURIComponent(value).replace(/!/g, \"%21\"): notReallyPercentEncode(value);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\tsubFunction.varNames = varNames;\n\treturn {\n\t\tprefix: prefix,\n\t\tsubstitution: subFunction\n\t};\n}\n\nfunction UriTemplate(template) {\n\tif (!(this instanceof UriTemplate)) {\n\t\treturn new UriTemplate(template);\n\t}\n\tvar parts = template.split(\"{\");\n\tvar textParts = [parts.shift()];\n\tvar prefixes = [];\n\tvar substitutions = [];\n\tvar varNames = [];\n\twhile (parts.length > 0) {\n\t\tvar part = parts.shift();\n\t\tvar spec = part.split(\"}\")[0];\n\t\tvar remainder = part.substring(spec.length + 1);\n\t\tvar funcs = uriTemplateSubstitution(spec);\n\t\tsubstitutions.push(funcs.substitution);\n\t\tprefixes.push(funcs.prefix);\n\t\ttextParts.push(remainder);\n\t\tvarNames = varNames.concat(funcs.substitution.varNames);\n\t}\n\tthis.fill = function (valueFunction) {\n\t\tvar result = textParts[0];\n\t\tfor (var i = 0; i < substitutions.length; i++) {\n\t\t\tvar substitution = substitutions[i];\n\t\t\tresult += substitution(valueFunction);\n\t\t\tresult += textParts[i + 1];\n\t\t}\n\t\treturn result;\n\t};\n\tthis.varNames = varNames;\n\tthis.template = template;\n}\nUriTemplate.prototype = {\n\ttoString: function () {\n\t\treturn this.template;\n\t},\n\tfillFromObject: function (obj) {\n\t\treturn this.fill(function (varName) {\n\t\t\treturn obj[varName];\n\t\t});\n\t}\n};\nvar ValidatorContext = function ValidatorContext(parent, collectMultiple, errorReporter, checkRecursive, trackUnknownProperties) {\n\tthis.missing = [];\n\tthis.missingMap = {};\n\tthis.formatValidators = parent ? Object.create(parent.formatValidators) : {};\n\tthis.schemas = parent ? Object.create(parent.schemas) : {};\n\tthis.collectMultiple = collectMultiple;\n\tthis.errors = [];\n\tthis.handleError = collectMultiple ? this.collectError : this.returnError;\n\tif (checkRecursive) {\n\t\tthis.checkRecursive = true;\n\t\tthis.scanned = [];\n\t\tthis.scannedFrozen = [];\n\t\tthis.scannedFrozenSchemas = [];\n\t\tthis.scannedFrozenValidationErrors = [];\n\t\tthis.validatedSchemasKey = 'tv4_validation_id';\n\t\tthis.validationErrorsKey = 'tv4_validation_errors_id';\n\t}\n\tif (trackUnknownProperties) {\n\t\tthis.trackUnknownProperties = true;\n\t\tthis.knownPropertyPaths = {};\n\t\tthis.unknownPropertyPaths = {};\n\t}\n\tthis.errorReporter = errorReporter || defaultErrorReporter('en');\n\tif (typeof this.errorReporter === 'string') {\n\t\tthrow new Error('debug');\n\t}\n\tthis.definedKeywords = {};\n\tif (parent) {\n\t\tfor (var key in parent.definedKeywords) {\n\t\t\tthis.definedKeywords[key] = parent.definedKeywords[key].slice(0);\n\t\t}\n\t}\n};\nValidatorContext.prototype.defineKeyword = function (keyword, keywordFunction) {\n\tthis.definedKeywords[keyword] = this.definedKeywords[keyword] || [];\n\tthis.definedKeywords[keyword].push(keywordFunction);\n};\nValidatorContext.prototype.createError = function (code, messageParams, dataPath, schemaPath, subErrors, data, schema) {\n\tvar error = new ValidationError(code, messageParams, dataPath, schemaPath, subErrors);\n\terror.message = this.errorReporter(error, data, schema);\n\treturn error;\n};\nValidatorContext.prototype.returnError = function (error) {\n\treturn error;\n};\nValidatorContext.prototype.collectError = function (error) {\n\tif (error) {\n\t\tthis.errors.push(error);\n\t}\n\treturn null;\n};\nValidatorContext.prototype.prefixErrors = function (startIndex, dataPath, schemaPath) {\n\tfor (var i = startIndex; i < this.errors.length; i++) {\n\t\tthis.errors[i] = this.errors[i].prefixWith(dataPath, schemaPath);\n\t}\n\treturn this;\n};\nValidatorContext.prototype.banUnknownProperties = function (data, schema) {\n\tfor (var unknownPath in this.unknownPropertyPaths) {\n\t\tvar error = this.createError(ErrorCodes.UNKNOWN_PROPERTY, {path: unknownPath}, unknownPath, \"\", null, data, schema);\n\t\tvar result = this.handleError(error);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.addFormat = function (format, validator) {\n\tif (typeof format === 'object') {\n\t\tfor (var key in format) {\n\t\t\tthis.addFormat(key, format[key]);\n\t\t}\n\t\treturn this;\n\t}\n\tthis.formatValidators[format] = validator;\n};\nValidatorContext.prototype.resolveRefs = function (schema, urlHistory) {\n\tif (schema['$ref'] !== undefined) {\n\t\turlHistory = urlHistory || {};\n\t\tif (urlHistory[schema['$ref']]) {\n\t\t\treturn this.createError(ErrorCodes.CIRCULAR_REFERENCE, {urls: Object.keys(urlHistory).join(', ')}, '', '', null, undefined, schema);\n\t\t}\n\t\turlHistory[schema['$ref']] = true;\n\t\tschema = this.getSchema(schema['$ref'], urlHistory);\n\t}\n\treturn schema;\n};\nValidatorContext.prototype.getSchema = function (url, urlHistory) {\n\tvar schema;\n\tif (this.schemas[url] !== undefined) {\n\t\tschema = this.schemas[url];\n\t\treturn this.resolveRefs(schema, urlHistory);\n\t}\n\tvar baseUrl = url;\n\tvar fragment = \"\";\n\tif (url.indexOf('#') !== -1) {\n\t\tfragment = url.substring(url.indexOf(\"#\") + 1);\n\t\tbaseUrl = url.substring(0, url.indexOf(\"#\"));\n\t}\n\tif (typeof this.schemas[baseUrl] === 'object') {\n\t\tschema = this.schemas[baseUrl];\n\t\tvar pointerPath = decodeURIComponent(fragment);\n\t\tif (pointerPath === \"\") {\n\t\t\treturn this.resolveRefs(schema, urlHistory);\n\t\t} else if (pointerPath.charAt(0) !== \"/\") {\n\t\t\treturn undefined;\n\t\t}\n\t\tvar parts = pointerPath.split(\"/\").slice(1);\n\t\tfor (var i = 0; i < parts.length; i++) {\n\t\t\tvar component = parts[i].replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n\t\t\tif (schema[component] === undefined) {\n\t\t\t\tschema = undefined;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tschema = schema[component];\n\t\t}\n\t\tif (schema !== undefined) {\n\t\t\treturn this.resolveRefs(schema, urlHistory);\n\t\t}\n\t}\n\tif (this.missing[baseUrl] === undefined) {\n\t\tthis.missing.push(baseUrl);\n\t\tthis.missing[baseUrl] = baseUrl;\n\t\tthis.missingMap[baseUrl] = baseUrl;\n\t}\n};\nValidatorContext.prototype.searchSchemas = function (schema, url) {\n\tif (Array.isArray(schema)) {\n\t\tfor (var i = 0; i < schema.length; i++) {\n\t\t\tthis.searchSchemas(schema[i], url);\n\t\t}\n\t} else if (schema && typeof schema === \"object\") {\n\t\tif (typeof schema.id === \"string\") {\n\t\t\tif (isTrustedUrl(url, schema.id)) {\n\t\t\t\tif (this.schemas[schema.id] === undefined) {\n\t\t\t\t\tthis.schemas[schema.id] = schema;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (var key in schema) {\n\t\t\tif (key !== \"enum\") {\n\t\t\t\tif (typeof schema[key] === \"object\") {\n\t\t\t\t\tthis.searchSchemas(schema[key], url);\n\t\t\t\t} else if (key === \"$ref\") {\n\t\t\t\t\tvar uri = getDocumentUri(schema[key]);\n\t\t\t\t\tif (uri && this.schemas[uri] === undefined && this.missingMap[uri] === undefined) {\n\t\t\t\t\t\tthis.missingMap[uri] = uri;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nValidatorContext.prototype.addSchema = function (url, schema) {\n\t//overload\n\tif (typeof url !== 'string' || typeof schema === 'undefined') {\n\t\tif (typeof url === 'object' && typeof url.id === 'string') {\n\t\t\tschema = url;\n\t\t\turl = schema.id;\n\t\t}\n\t\telse {\n\t\t\treturn;\n\t\t}\n\t}\n\tif (url === getDocumentUri(url) + \"#\") {\n\t\t// Remove empty fragment\n\t\turl = getDocumentUri(url);\n\t}\n\tthis.schemas[url] = schema;\n\tdelete this.missingMap[url];\n\tnormSchema(schema, url);\n\tthis.searchSchemas(schema, url);\n};\n\nValidatorContext.prototype.getSchemaMap = function () {\n\tvar map = {};\n\tfor (var key in this.schemas) {\n\t\tmap[key] = this.schemas[key];\n\t}\n\treturn map;\n};\n\nValidatorContext.prototype.getSchemaUris = function (filterRegExp) {\n\tvar list = [];\n\tfor (var key in this.schemas) {\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\n\t\t\tlist.push(key);\n\t\t}\n\t}\n\treturn list;\n};\n\nValidatorContext.prototype.getMissingUris = function (filterRegExp) {\n\tvar list = [];\n\tfor (var key in this.missingMap) {\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\n\t\t\tlist.push(key);\n\t\t}\n\t}\n\treturn list;\n};\n\nValidatorContext.prototype.dropSchemas = function () {\n\tthis.schemas = {};\n\tthis.reset();\n};\nValidatorContext.prototype.reset = function () {\n\tthis.missing = [];\n\tthis.missingMap = {};\n\tthis.errors = [];\n};\n\nValidatorContext.prototype.validateAll = function (data, schema, dataPathParts, schemaPathParts, dataPointerPath) {\n\tvar topLevel;\n\tschema = this.resolveRefs(schema);\n\tif (!schema) {\n\t\treturn null;\n\t} else if (schema instanceof ValidationError) {\n\t\tthis.errors.push(schema);\n\t\treturn schema;\n\t}\n\n\tvar startErrorCount = this.errors.length;\n\tvar frozenIndex, scannedFrozenSchemaIndex = null, scannedSchemasIndex = null;\n\tif (this.checkRecursive && data && typeof data === 'object') {\n\t\ttopLevel = !this.scanned.length;\n\t\tif (data[this.validatedSchemasKey]) {\n\t\t\tvar schemaIndex = data[this.validatedSchemasKey].indexOf(schema);\n\t\t\tif (schemaIndex !== -1) {\n\t\t\t\tthis.errors = this.errors.concat(data[this.validationErrorsKey][schemaIndex]);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tif (Object.isFrozen(data)) {\n\t\t\tfrozenIndex = this.scannedFrozen.indexOf(data);\n\t\t\tif (frozenIndex !== -1) {\n\t\t\t\tvar frozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].indexOf(schema);\n\t\t\t\tif (frozenSchemaIndex !== -1) {\n\t\t\t\t\tthis.errors = this.errors.concat(this.scannedFrozenValidationErrors[frozenIndex][frozenSchemaIndex]);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.scanned.push(data);\n\t\tif (Object.isFrozen(data)) {\n\t\t\tif (frozenIndex === -1) {\n\t\t\t\tfrozenIndex = this.scannedFrozen.length;\n\t\t\t\tthis.scannedFrozen.push(data);\n\t\t\t\tthis.scannedFrozenSchemas.push([]);\n\t\t\t}\n\t\t\tscannedFrozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].length;\n\t\t\tthis.scannedFrozenSchemas[frozenIndex][scannedFrozenSchemaIndex] = schema;\n\t\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = [];\n\t\t} else {\n\t\t\tif (!data[this.validatedSchemasKey]) {\n\t\t\t\ttry {\n\t\t\t\t\tObject.defineProperty(data, this.validatedSchemasKey, {\n\t\t\t\t\t\tvalue: [],\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t});\n\t\t\t\t\tObject.defineProperty(data, this.validationErrorsKey, {\n\t\t\t\t\t\tvalue: [],\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\t//IE 7/8 workaround\n\t\t\t\t\tdata[this.validatedSchemasKey] = [];\n\t\t\t\t\tdata[this.validationErrorsKey] = [];\n\t\t\t\t}\n\t\t\t}\n\t\t\tscannedSchemasIndex = data[this.validatedSchemasKey].length;\n\t\t\tdata[this.validatedSchemasKey][scannedSchemasIndex] = schema;\n\t\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = [];\n\t\t}\n\t}\n\n\tvar errorCount = this.errors.length;\n\tvar error = this.validateBasic(data, schema, dataPointerPath)\n\t\t|| this.validateNumeric(data, schema, dataPointerPath)\n\t\t|| this.validateString(data, schema, dataPointerPath)\n\t\t|| this.validateArray(data, schema, dataPointerPath)\n\t\t|| this.validateObject(data, schema, dataPointerPath)\n\t\t|| this.validateCombinations(data, schema, dataPointerPath)\n\t\t|| this.validateHypermedia(data, schema, dataPointerPath)\n\t\t|| this.validateFormat(data, schema, dataPointerPath)\n\t\t|| this.validateDefinedKeywords(data, schema, dataPointerPath)\n\t\t|| null;\n\n\tif (topLevel) {\n\t\twhile (this.scanned.length) {\n\t\t\tvar item = this.scanned.pop();\n\t\t\tdelete item[this.validatedSchemasKey];\n\t\t}\n\t\tthis.scannedFrozen = [];\n\t\tthis.scannedFrozenSchemas = [];\n\t}\n\n\tif (error || errorCount !== this.errors.length) {\n\t\twhile ((dataPathParts && dataPathParts.length) || (schemaPathParts && schemaPathParts.length)) {\n\t\t\tvar dataPart = (dataPathParts && dataPathParts.length) ? \"\" + dataPathParts.pop() : null;\n\t\t\tvar schemaPart = (schemaPathParts && schemaPathParts.length) ? \"\" + schemaPathParts.pop() : null;\n\t\t\tif (error) {\n\t\t\t\terror = error.prefixWith(dataPart, schemaPart);\n\t\t\t}\n\t\t\tthis.prefixErrors(errorCount, dataPart, schemaPart);\n\t\t}\n\t}\n\n\tif (scannedFrozenSchemaIndex !== null) {\n\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = this.errors.slice(startErrorCount);\n\t} else if (scannedSchemasIndex !== null) {\n\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = this.errors.slice(startErrorCount);\n\t}\n\n\treturn this.handleError(error);\n};\nValidatorContext.prototype.validateFormat = function (data, schema) {\n\tif (typeof schema.format !== 'string' || !this.formatValidators[schema.format]) {\n\t\treturn null;\n\t}\n\tvar errorMessage = this.formatValidators[schema.format].call(null, data, schema);\n\tif (typeof errorMessage === 'string' || typeof errorMessage === 'number') {\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage}, '', '/format', null, data, schema);\n\t} else if (errorMessage && typeof errorMessage === 'object') {\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage.message || \"?\"}, errorMessage.dataPath || '', errorMessage.schemaPath || \"/format\", null, data, schema);\n\t}\n\treturn null;\n};\nValidatorContext.prototype.validateDefinedKeywords = function (data, schema, dataPointerPath) {\n\tfor (var key in this.definedKeywords) {\n\t\tif (typeof schema[key] === 'undefined') {\n\t\t\tcontinue;\n\t\t}\n\t\tvar validationFunctions = this.definedKeywords[key];\n\t\tfor (var i = 0; i < validationFunctions.length; i++) {\n\t\t\tvar func = validationFunctions[i];\n\t\t\tvar result = func(data, schema[key], schema, dataPointerPath);\n\t\t\tif (typeof result === 'string' || typeof result === 'number') {\n\t\t\t\treturn this.createError(ErrorCodes.KEYWORD_CUSTOM, {key: key, message: result}, '', '', null, data, schema).prefixWith(null, key);\n\t\t\t} else if (result && typeof result === 'object') {\n\t\t\t\tvar code = result.code;\n\t\t\t\tif (typeof code === 'string') {\n\t\t\t\t\tif (!ErrorCodes[code]) {\n\t\t\t\t\t\tthrow new Error('Undefined error code (use defineError): ' + code);\n\t\t\t\t\t}\n\t\t\t\t\tcode = ErrorCodes[code];\n\t\t\t\t} else if (typeof code !== 'number') {\n\t\t\t\t\tcode = ErrorCodes.KEYWORD_CUSTOM;\n\t\t\t\t}\n\t\t\t\tvar messageParams = (typeof result.message === 'object') ? result.message : {key: key, message: result.message || \"?\"};\n\t\t\t\tvar schemaPath = result.schemaPath || (\"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1'));\n\t\t\t\treturn this.createError(code, messageParams, result.dataPath || null, schemaPath, null, data, schema);\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nfunction recursiveCompare(A, B) {\n\tif (A === B) {\n\t\treturn true;\n\t}\n\tif (A && B && typeof A === \"object\" && typeof B === \"object\") {\n\t\tif (Array.isArray(A) !== Array.isArray(B)) {\n\t\t\treturn false;\n\t\t} else if (Array.isArray(A)) {\n\t\t\tif (A.length !== B.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (var i = 0; i < A.length; i++) {\n\t\t\t\tif (!recursiveCompare(A[i], B[i])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar key;\n\t\t\tfor (key in A) {\n\t\t\t\tif (B[key] === undefined && A[key] !== undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (key in B) {\n\t\t\t\tif (A[key] === undefined && B[key] !== undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (key in A) {\n\t\t\t\tif (!recursiveCompare(A[key], B[key])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nValidatorContext.prototype.validateBasic = function validateBasic(data, schema, dataPointerPath) {\n\tvar error;\n\tif (error = this.validateType(data, schema, dataPointerPath)) {\n\t\treturn error.prefixWith(null, \"type\");\n\t}\n\tif (error = this.validateEnum(data, schema, dataPointerPath)) {\n\t\treturn error.prefixWith(null, \"type\");\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateType = function validateType(data, schema) {\n\tif (schema.type === undefined) {\n\t\treturn null;\n\t}\n\tvar dataType = typeof data;\n\tif (data === null) {\n\t\tdataType = \"null\";\n\t} else if (Array.isArray(data)) {\n\t\tdataType = \"array\";\n\t}\n\tvar allowedTypes = schema.type;\n\tif (!Array.isArray(allowedTypes)) {\n\t\tallowedTypes = [allowedTypes];\n\t}\n\n\tfor (var i = 0; i < allowedTypes.length; i++) {\n\t\tvar type = allowedTypes[i];\n\t\tif (type === dataType || (type === \"integer\" && dataType === \"number\" && (data % 1 === 0))) {\n\t\t\treturn null;\n\t\t}\n\t}\n\treturn this.createError(ErrorCodes.INVALID_TYPE, {type: dataType, expected: allowedTypes.join(\"/\")}, '', '', null, data, schema);\n};\n\nValidatorContext.prototype.validateEnum = function validateEnum(data, schema) {\n\tif (schema[\"enum\"] === undefined) {\n\t\treturn null;\n\t}\n\tfor (var i = 0; i < schema[\"enum\"].length; i++) {\n\t\tvar enumVal = schema[\"enum\"][i];\n\t\tif (recursiveCompare(data, enumVal)) {\n\t\t\treturn null;\n\t\t}\n\t}\n\treturn this.createError(ErrorCodes.ENUM_MISMATCH, {value: (typeof JSON !== 'undefined') ? JSON.stringify(data) : data}, '', '', null, data, schema);\n};\n\nValidatorContext.prototype.validateNumeric = function validateNumeric(data, schema, dataPointerPath) {\n\treturn this.validateMultipleOf(data, schema, dataPointerPath)\n\t\t|| this.validateMinMax(data, schema, dataPointerPath)\n\t\t|| this.validateNaN(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nvar CLOSE_ENOUGH_LOW = Math.pow(2, -51);\nvar CLOSE_ENOUGH_HIGH = 1 - CLOSE_ENOUGH_LOW;\nValidatorContext.prototype.validateMultipleOf = function validateMultipleOf(data, schema) {\n\tvar multipleOf = schema.multipleOf || schema.divisibleBy;\n\tif (multipleOf === undefined) {\n\t\treturn null;\n\t}\n\tif (typeof data === \"number\") {\n\t\tvar remainder = (data/multipleOf)%1;\n\t\tif (remainder >= CLOSE_ENOUGH_LOW && remainder < CLOSE_ENOUGH_HIGH) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MULTIPLE_OF, {value: data, multipleOf: multipleOf}, '', '', null, data, schema);\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateMinMax = function validateMinMax(data, schema) {\n\tif (typeof data !== \"number\") {\n\t\treturn null;\n\t}\n\tif (schema.minimum !== undefined) {\n\t\tif (data < schema.minimum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM, {value: data, minimum: schema.minimum}, '', '/minimum', null, data, schema);\n\t\t}\n\t\tif (schema.exclusiveMinimum && data === schema.minimum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM_EXCLUSIVE, {value: data, minimum: schema.minimum}, '', '/exclusiveMinimum', null, data, schema);\n\t\t}\n\t}\n\tif (schema.maximum !== undefined) {\n\t\tif (data > schema.maximum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM, {value: data, maximum: schema.maximum}, '', '/maximum', null, data, schema);\n\t\t}\n\t\tif (schema.exclusiveMaximum && data === schema.maximum) {\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM_EXCLUSIVE, {value: data, maximum: schema.maximum}, '', '/exclusiveMaximum', null, data, schema);\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateNaN = function validateNaN(data, schema) {\n\tif (typeof data !== \"number\") {\n\t\treturn null;\n\t}\n\tif (isNaN(data) === true || data === Infinity || data === -Infinity) {\n\t\treturn this.createError(ErrorCodes.NUMBER_NOT_A_NUMBER, {value: data}, '', '/type', null, data, schema);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateString = function validateString(data, schema, dataPointerPath) {\n\treturn this.validateStringLength(data, schema, dataPointerPath)\n\t\t|| this.validateStringPattern(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateStringLength = function validateStringLength(data, schema) {\n\tif (typeof data !== \"string\") {\n\t\treturn null;\n\t}\n\tif (schema.minLength !== undefined) {\n\t\tif (data.length < schema.minLength) {\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_SHORT, {length: data.length, minimum: schema.minLength}, '', '/minLength', null, data, schema);\n\t\t}\n\t}\n\tif (schema.maxLength !== undefined) {\n\t\tif (data.length > schema.maxLength) {\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_LONG, {length: data.length, maximum: schema.maxLength}, '', '/maxLength', null, data, schema);\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateStringPattern = function validateStringPattern(data, schema) {\n\tif (typeof data !== \"string\" || (typeof schema.pattern !== \"string\" && !(schema.pattern instanceof RegExp))) {\n\t\treturn null;\n\t}\n\tvar regexp;\n\tif (schema.pattern instanceof RegExp) {\n\t  regexp = schema.pattern;\n\t}\n\telse {\n\t  var body, flags = '';\n\t  // Check for regular expression literals\n\t  // @see http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5\n\t  var literal = schema.pattern.match(/^\\/(.+)\\/([img]*)$/);\n\t  if (literal) {\n\t    body = literal[1];\n\t    flags = literal[2];\n\t  }\n\t  else {\n\t    body = schema.pattern;\n\t  }\n\t  regexp = new RegExp(body, flags);\n\t}\n\tif (!regexp.test(data)) {\n\t\treturn this.createError(ErrorCodes.STRING_PATTERN, {pattern: schema.pattern}, '', '/pattern', null, data, schema);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateArray = function validateArray(data, schema, dataPointerPath) {\n\tif (!Array.isArray(data)) {\n\t\treturn null;\n\t}\n\treturn this.validateArrayLength(data, schema, dataPointerPath)\n\t\t|| this.validateArrayUniqueItems(data, schema, dataPointerPath)\n\t\t|| this.validateArrayItems(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateArrayLength = function validateArrayLength(data, schema) {\n\tvar error;\n\tif (schema.minItems !== undefined) {\n\t\tif (data.length < schema.minItems) {\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_SHORT, {length: data.length, minimum: schema.minItems}, '', '/minItems', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\tif (schema.maxItems !== undefined) {\n\t\tif (data.length > schema.maxItems) {\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_LONG, {length: data.length, maximum: schema.maxItems}, '', '/maxItems', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateArrayUniqueItems = function validateArrayUniqueItems(data, schema) {\n\tif (schema.uniqueItems) {\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tfor (var j = i + 1; j < data.length; j++) {\n\t\t\t\tif (recursiveCompare(data[i], data[j])) {\n\t\t\t\t\tvar error = this.createError(ErrorCodes.ARRAY_UNIQUE, {match1: i, match2: j}, '', '/uniqueItems', null, data, schema);\n\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateArrayItems = function validateArrayItems(data, schema, dataPointerPath) {\n\tif (schema.items === undefined) {\n\t\treturn null;\n\t}\n\tvar error, i;\n\tif (Array.isArray(schema.items)) {\n\t\tfor (i = 0; i < data.length; i++) {\n\t\t\tif (i < schema.items.length) {\n\t\t\t\tif (error = this.validateAll(data[i], schema.items[i], [i], [\"items\", i], dataPointerPath + \"/\" + i)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t} else if (schema.additionalItems !== undefined) {\n\t\t\t\tif (typeof schema.additionalItems === \"boolean\") {\n\t\t\t\t\tif (!schema.additionalItems) {\n\t\t\t\t\t\terror = (this.createError(ErrorCodes.ARRAY_ADDITIONAL_ITEMS, {}, '/' + i, '/additionalItems', null, data, schema));\n\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (error = this.validateAll(data[i], schema.additionalItems, [i], [\"additionalItems\"], dataPointerPath + \"/\" + i)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (i = 0; i < data.length; i++) {\n\t\t\tif (error = this.validateAll(data[i], schema.items, [i], [\"items\"], dataPointerPath + \"/\" + i)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObject = function validateObject(data, schema, dataPointerPath) {\n\tif (typeof data !== \"object\" || data === null || Array.isArray(data)) {\n\t\treturn null;\n\t}\n\treturn this.validateObjectMinMaxProperties(data, schema, dataPointerPath)\n\t\t|| this.validateObjectRequiredProperties(data, schema, dataPointerPath)\n\t\t|| this.validateObjectProperties(data, schema, dataPointerPath)\n\t\t|| this.validateObjectDependencies(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateObjectMinMaxProperties = function validateObjectMinMaxProperties(data, schema) {\n\tvar keys = Object.keys(data);\n\tvar error;\n\tif (schema.minProperties !== undefined) {\n\t\tif (keys.length < schema.minProperties) {\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MINIMUM, {propertyCount: keys.length, minimum: schema.minProperties}, '', '/minProperties', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\tif (schema.maxProperties !== undefined) {\n\t\tif (keys.length > schema.maxProperties) {\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MAXIMUM, {propertyCount: keys.length, maximum: schema.maxProperties}, '', '/maxProperties', null, data, schema);\n\t\t\tif (this.handleError(error)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObjectRequiredProperties = function validateObjectRequiredProperties(data, schema) {\n\tif (schema.required !== undefined) {\n\t\tfor (var i = 0; i < schema.required.length; i++) {\n\t\t\tvar key = schema.required[i];\n\t\t\tif (data[key] === undefined) {\n\t\t\t\tvar error = this.createError(ErrorCodes.OBJECT_REQUIRED, {key: key}, '', '/required/' + i, null, data, schema);\n\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObjectProperties = function validateObjectProperties(data, schema, dataPointerPath) {\n\tvar error;\n\tfor (var key in data) {\n\t\tvar keyPointerPath = dataPointerPath + \"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1');\n\t\tvar foundMatch = false;\n\t\tif (schema.properties !== undefined && schema.properties[key] !== undefined) {\n\t\t\tfoundMatch = true;\n\t\t\tif (error = this.validateAll(data[key], schema.properties[key], [key], [\"properties\", key], keyPointerPath)) {\n\t\t\t\treturn error;\n\t\t\t}\n\t\t}\n\t\tif (schema.patternProperties !== undefined) {\n\t\t\tfor (var patternKey in schema.patternProperties) {\n\t\t\t\tvar regexp = new RegExp(patternKey);\n\t\t\t\tif (regexp.test(key)) {\n\t\t\t\t\tfoundMatch = true;\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.patternProperties[patternKey], [key], [\"patternProperties\", patternKey], keyPointerPath)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!foundMatch) {\n\t\t\tif (schema.additionalProperties !== undefined) {\n\t\t\t\tif (this.trackUnknownProperties) {\n\t\t\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\n\t\t\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\n\t\t\t\t}\n\t\t\t\tif (typeof schema.additionalProperties === \"boolean\") {\n\t\t\t\t\tif (!schema.additionalProperties) {\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_ADDITIONAL_PROPERTIES, {key: key}, '', '/additionalProperties', null, data, schema).prefixWith(key, null);\n\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.additionalProperties, [key], [\"additionalProperties\"], keyPointerPath)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (this.trackUnknownProperties && !this.knownPropertyPaths[keyPointerPath]) {\n\t\t\t\tthis.unknownPropertyPaths[keyPointerPath] = true;\n\t\t\t}\n\t\t} else if (this.trackUnknownProperties) {\n\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\n\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateObjectDependencies = function validateObjectDependencies(data, schema, dataPointerPath) {\n\tvar error;\n\tif (schema.dependencies !== undefined) {\n\t\tfor (var depKey in schema.dependencies) {\n\t\t\tif (data[depKey] !== undefined) {\n\t\t\t\tvar dep = schema.dependencies[depKey];\n\t\t\t\tif (typeof dep === \"string\") {\n\t\t\t\t\tif (data[dep] === undefined) {\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: dep}, '', '', null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\n\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (Array.isArray(dep)) {\n\t\t\t\t\tfor (var i = 0; i < dep.length; i++) {\n\t\t\t\t\t\tvar requiredKey = dep[i];\n\t\t\t\t\t\tif (data[requiredKey] === undefined) {\n\t\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: requiredKey}, '', '/' + i, null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\n\t\t\t\t\t\t\tif (this.handleError(error)) {\n\t\t\t\t\t\t\t\treturn error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (error = this.validateAll(data, dep, [], [\"dependencies\", depKey], dataPointerPath)) {\n\t\t\t\t\t\treturn error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateCombinations = function validateCombinations(data, schema, dataPointerPath) {\n\treturn this.validateAllOf(data, schema, dataPointerPath)\n\t\t|| this.validateAnyOf(data, schema, dataPointerPath)\n\t\t|| this.validateOneOf(data, schema, dataPointerPath)\n\t\t|| this.validateNot(data, schema, dataPointerPath)\n\t\t|| null;\n};\n\nValidatorContext.prototype.validateAllOf = function validateAllOf(data, schema, dataPointerPath) {\n\tif (schema.allOf === undefined) {\n\t\treturn null;\n\t}\n\tvar error;\n\tfor (var i = 0; i < schema.allOf.length; i++) {\n\t\tvar subSchema = schema.allOf[i];\n\t\tif (error = this.validateAll(data, subSchema, [], [\"allOf\", i], dataPointerPath)) {\n\t\t\treturn error;\n\t\t}\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateAnyOf = function validateAnyOf(data, schema, dataPointerPath) {\n\tif (schema.anyOf === undefined) {\n\t\treturn null;\n\t}\n\tvar errors = [];\n\tvar startErrorCount = this.errors.length;\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\n\tif (this.trackUnknownProperties) {\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\n\t}\n\tvar errorAtEnd = true;\n\tfor (var i = 0; i < schema.anyOf.length; i++) {\n\t\tif (this.trackUnknownProperties) {\n\t\t\tthis.unknownPropertyPaths = {};\n\t\t\tthis.knownPropertyPaths = {};\n\t\t}\n\t\tvar subSchema = schema.anyOf[i];\n\n\t\tvar errorCount = this.errors.length;\n\t\tvar error = this.validateAll(data, subSchema, [], [\"anyOf\", i], dataPointerPath);\n\n\t\tif (error === null && errorCount === this.errors.length) {\n\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\n\t\t\tif (this.trackUnknownProperties) {\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\n\t\t\t\t}\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// We need to continue looping so we catch all the property definitions, but we don't want to return an error\n\t\t\t\terrorAtEnd = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t\tif (error) {\n\t\t\terrors.push(error.prefixWith(null, \"\" + i).prefixWith(null, \"anyOf\"));\n\t\t}\n\t}\n\tif (this.trackUnknownProperties) {\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\n\t}\n\tif (errorAtEnd) {\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t\treturn this.createError(ErrorCodes.ANY_OF_MISSING, {}, \"\", \"/anyOf\", errors, data, schema);\n\t}\n};\n\nValidatorContext.prototype.validateOneOf = function validateOneOf(data, schema, dataPointerPath) {\n\tif (schema.oneOf === undefined) {\n\t\treturn null;\n\t}\n\tvar validIndex = null;\n\tvar errors = [];\n\tvar startErrorCount = this.errors.length;\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\n\tif (this.trackUnknownProperties) {\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\n\t}\n\tfor (var i = 0; i < schema.oneOf.length; i++) {\n\t\tif (this.trackUnknownProperties) {\n\t\t\tthis.unknownPropertyPaths = {};\n\t\t\tthis.knownPropertyPaths = {};\n\t\t}\n\t\tvar subSchema = schema.oneOf[i];\n\n\t\tvar errorCount = this.errors.length;\n\t\tvar error = this.validateAll(data, subSchema, [], [\"oneOf\", i], dataPointerPath);\n\n\t\tif (error === null && errorCount === this.errors.length) {\n\t\t\tif (validIndex === null) {\n\t\t\t\tvalidIndex = i;\n\t\t\t} else {\n\t\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t\t\t\treturn this.createError(ErrorCodes.ONE_OF_MULTIPLE, {index1: validIndex, index2: i}, \"\", \"/oneOf\", null, data, schema);\n\t\t\t}\n\t\t\tif (this.trackUnknownProperties) {\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\n\t\t\t\t}\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (error) {\n\t\t\terrors.push(error);\n\t\t}\n\t}\n\tif (this.trackUnknownProperties) {\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\n\t}\n\tif (validIndex === null) {\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t\treturn this.createError(ErrorCodes.ONE_OF_MISSING, {}, \"\", \"/oneOf\", errors, data, schema);\n\t} else {\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateNot = function validateNot(data, schema, dataPointerPath) {\n\tif (schema.not === undefined) {\n\t\treturn null;\n\t}\n\tvar oldErrorCount = this.errors.length;\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\n\tif (this.trackUnknownProperties) {\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\n\t\tthis.unknownPropertyPaths = {};\n\t\tthis.knownPropertyPaths = {};\n\t}\n\tvar error = this.validateAll(data, schema.not, null, null, dataPointerPath);\n\tvar notErrors = this.errors.slice(oldErrorCount);\n\tthis.errors = this.errors.slice(0, oldErrorCount);\n\tif (this.trackUnknownProperties) {\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\n\t}\n\tif (error === null && notErrors.length === 0) {\n\t\treturn this.createError(ErrorCodes.NOT_PASSED, {}, \"\", \"/not\", null, data, schema);\n\t}\n\treturn null;\n};\n\nValidatorContext.prototype.validateHypermedia = function validateCombinations(data, schema, dataPointerPath) {\n\tif (!schema.links) {\n\t\treturn null;\n\t}\n\tvar error;\n\tfor (var i = 0; i < schema.links.length; i++) {\n\t\tvar ldo = schema.links[i];\n\t\tif (ldo.rel === \"describedby\") {\n\t\t\tvar template = new UriTemplate(ldo.href);\n\t\t\tvar allPresent = true;\n\t\t\tfor (var j = 0; j < template.varNames.length; j++) {\n\t\t\t\tif (!(template.varNames[j] in data)) {\n\t\t\t\t\tallPresent = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (allPresent) {\n\t\t\t\tvar schemaUrl = template.fillFromObject(data);\n\t\t\t\tvar subSchema = {\"$ref\": schemaUrl};\n\t\t\t\tif (error = this.validateAll(data, subSchema, [], [\"links\", i], dataPointerPath)) {\n\t\t\t\t\treturn error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n// parseURI() and resolveUrl() are from https://gist.github.com/1088850\n//   -  released as public domain by author (\"Yaffle\") - see comments on gist\n\nfunction parseURI(url) {\n\tvar m = String(url).replace(/^\\s+|\\s+$/g, '').match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\n\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\n\treturn (m ? {\n\t\thref     : m[0] || '',\n\t\tprotocol : m[1] || '',\n\t\tauthority: m[2] || '',\n\t\thost     : m[3] || '',\n\t\thostname : m[4] || '',\n\t\tport     : m[5] || '',\n\t\tpathname : m[6] || '',\n\t\tsearch   : m[7] || '',\n\t\thash     : m[8] || ''\n\t} : null);\n}\n\nfunction resolveUrl(base, href) {// RFC 3986\n\n\tfunction removeDotSegments(input) {\n\t\tvar output = [];\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\n\t\t\t\tif (p === '/..') {\n\t\t\t\t\toutput.pop();\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(p);\n\t\t\t\t}\n\t\t});\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\n\t}\n\n\thref = parseURI(href || '');\n\tbase = parseURI(base || '');\n\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\n\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\n\t\thref.hash;\n}\n\nfunction getDocumentUri(uri) {\n\treturn uri.split('#')[0];\n}\nfunction normSchema(schema, baseUri) {\n\tif (schema && typeof schema === \"object\") {\n\t\tif (baseUri === undefined) {\n\t\t\tbaseUri = schema.id;\n\t\t} else if (typeof schema.id === \"string\") {\n\t\t\tbaseUri = resolveUrl(baseUri, schema.id);\n\t\t\tschema.id = baseUri;\n\t\t}\n\t\tif (Array.isArray(schema)) {\n\t\t\tfor (var i = 0; i < schema.length; i++) {\n\t\t\t\tnormSchema(schema[i], baseUri);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof schema['$ref'] === \"string\") {\n\t\t\t\tschema['$ref'] = resolveUrl(baseUri, schema['$ref']);\n\t\t\t}\n\t\t\tfor (var key in schema) {\n\t\t\t\tif (key !== \"enum\") {\n\t\t\t\t\tnormSchema(schema[key], baseUri);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction defaultErrorReporter(language) {\n\tlanguage = language || 'en';\n\n\tvar errorMessages = languages[language];\n\n\treturn function (error) {\n\t\tvar messageTemplate = errorMessages[error.code] || ErrorMessagesDefault[error.code];\n\t\tif (typeof messageTemplate !== 'string') {\n\t\t\treturn \"Unknown error code \" + error.code + \": \" + JSON.stringify(error.messageParams);\n\t\t}\n\t\tvar messageParams = error.params;\n\t\t// Adapted from Crockford's supplant()\n\t\treturn messageTemplate.replace(/\\{([^{}]*)\\}/g, function (whole, varName) {\n\t\t\tvar subValue = messageParams[varName];\n\t\t\treturn typeof subValue === 'string' || typeof subValue === 'number' ? subValue : whole;\n\t\t});\n\t};\n}\n\nvar ErrorCodes = {\n\tINVALID_TYPE: 0,\n\tENUM_MISMATCH: 1,\n\tANY_OF_MISSING: 10,\n\tONE_OF_MISSING: 11,\n\tONE_OF_MULTIPLE: 12,\n\tNOT_PASSED: 13,\n\t// Numeric errors\n\tNUMBER_MULTIPLE_OF: 100,\n\tNUMBER_MINIMUM: 101,\n\tNUMBER_MINIMUM_EXCLUSIVE: 102,\n\tNUMBER_MAXIMUM: 103,\n\tNUMBER_MAXIMUM_EXCLUSIVE: 104,\n\tNUMBER_NOT_A_NUMBER: 105,\n\t// String errors\n\tSTRING_LENGTH_SHORT: 200,\n\tSTRING_LENGTH_LONG: 201,\n\tSTRING_PATTERN: 202,\n\t// Object errors\n\tOBJECT_PROPERTIES_MINIMUM: 300,\n\tOBJECT_PROPERTIES_MAXIMUM: 301,\n\tOBJECT_REQUIRED: 302,\n\tOBJECT_ADDITIONAL_PROPERTIES: 303,\n\tOBJECT_DEPENDENCY_KEY: 304,\n\t// Array errors\n\tARRAY_LENGTH_SHORT: 400,\n\tARRAY_LENGTH_LONG: 401,\n\tARRAY_UNIQUE: 402,\n\tARRAY_ADDITIONAL_ITEMS: 403,\n\t// Custom/user-defined errors\n\tFORMAT_CUSTOM: 500,\n\tKEYWORD_CUSTOM: 501,\n\t// Schema structure\n\tCIRCULAR_REFERENCE: 600,\n\t// Non-standard validation options\n\tUNKNOWN_PROPERTY: 1000\n};\nvar ErrorCodeLookup = {};\nfor (var key in ErrorCodes) {\n\tErrorCodeLookup[ErrorCodes[key]] = key;\n}\nvar ErrorMessagesDefault = {\n\tINVALID_TYPE: \"Invalid type: {type} (expected {expected})\",\n\tENUM_MISMATCH: \"No enum match for: {value}\",\n\tANY_OF_MISSING: \"Data does not match any schemas from \\\"anyOf\\\"\",\n\tONE_OF_MISSING: \"Data does not match any schemas from \\\"oneOf\\\"\",\n\tONE_OF_MULTIPLE: \"Data is valid against more than one schema from \\\"oneOf\\\": indices {index1} and {index2}\",\n\tNOT_PASSED: \"Data matches schema from \\\"not\\\"\",\n\t// Numeric errors\n\tNUMBER_MULTIPLE_OF: \"Value {value} is not a multiple of {multipleOf}\",\n\tNUMBER_MINIMUM: \"Value {value} is less than minimum {minimum}\",\n\tNUMBER_MINIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive minimum {minimum}\",\n\tNUMBER_MAXIMUM: \"Value {value} is greater than maximum {maximum}\",\n\tNUMBER_MAXIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive maximum {maximum}\",\n\tNUMBER_NOT_A_NUMBER: \"Value {value} is not a valid number\",\n\t// String errors\n\tSTRING_LENGTH_SHORT: \"String is too short ({length} chars), minimum {minimum}\",\n\tSTRING_LENGTH_LONG: \"String is too long ({length} chars), maximum {maximum}\",\n\tSTRING_PATTERN: \"String does not match pattern: {pattern}\",\n\t// Object errors\n\tOBJECT_PROPERTIES_MINIMUM: \"Too few properties defined ({propertyCount}), minimum {minimum}\",\n\tOBJECT_PROPERTIES_MAXIMUM: \"Too many properties defined ({propertyCount}), maximum {maximum}\",\n\tOBJECT_REQUIRED: \"Missing required property: {key}\",\n\tOBJECT_ADDITIONAL_PROPERTIES: \"Additional properties not allowed\",\n\tOBJECT_DEPENDENCY_KEY: \"Dependency failed - key must exist: {missing} (due to key: {key})\",\n\t// Array errors\n\tARRAY_LENGTH_SHORT: \"Array is too short ({length}), minimum {minimum}\",\n\tARRAY_LENGTH_LONG: \"Array is too long ({length}), maximum {maximum}\",\n\tARRAY_UNIQUE: \"Array items are not unique (indices {match1} and {match2})\",\n\tARRAY_ADDITIONAL_ITEMS: \"Additional items not allowed\",\n\t// Format errors\n\tFORMAT_CUSTOM: \"Format validation failed ({message})\",\n\tKEYWORD_CUSTOM: \"Keyword failed: {key} ({message})\",\n\t// Schema structure\n\tCIRCULAR_REFERENCE: \"Circular $refs: {urls}\",\n\t// Non-standard validation options\n\tUNKNOWN_PROPERTY: \"Unknown property (not in schema)\"\n};\n\nfunction ValidationError(code, params, dataPath, schemaPath, subErrors) {\n\tError.call(this);\n\tif (code === undefined) {\n\t\tthrow new Error (\"No error code supplied: \" + schemaPath);\n\t}\n\tthis.message = '';\n\tthis.params = params;\n\tthis.code = code;\n\tthis.dataPath = dataPath || \"\";\n\tthis.schemaPath = schemaPath || \"\";\n\tthis.subErrors = subErrors || null;\n\n\tvar err = new Error(this.message);\n\tthis.stack = err.stack || err.stacktrace;\n\tif (!this.stack) {\n\t\ttry {\n\t\t\tthrow err;\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.stack = err.stack || err.stacktrace;\n\t\t}\n\t}\n}\nValidationError.prototype = Object.create(Error.prototype);\nValidationError.prototype.constructor = ValidationError;\nValidationError.prototype.name = 'ValidationError';\n\nValidationError.prototype.prefixWith = function (dataPrefix, schemaPrefix) {\n\tif (dataPrefix !== null) {\n\t\tdataPrefix = dataPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n\t\tthis.dataPath = \"/\" + dataPrefix + this.dataPath;\n\t}\n\tif (schemaPrefix !== null) {\n\t\tschemaPrefix = schemaPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n\t\tthis.schemaPath = \"/\" + schemaPrefix + this.schemaPath;\n\t}\n\tif (this.subErrors !== null) {\n\t\tfor (var i = 0; i < this.subErrors.length; i++) {\n\t\t\tthis.subErrors[i].prefixWith(dataPrefix, schemaPrefix);\n\t\t}\n\t}\n\treturn this;\n};\n\nfunction isTrustedUrl(baseUrl, testUrl) {\n\tif(testUrl.substring(0, baseUrl.length) === baseUrl){\n\t\tvar remainder = testUrl.substring(baseUrl.length);\n\t\tif ((testUrl.length > 0 && testUrl.charAt(baseUrl.length - 1) === \"/\")\n\t\t\t|| remainder.charAt(0) === \"#\"\n\t\t\t|| remainder.charAt(0) === \"?\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nvar languages = {};\nfunction createApi(language) {\n\tvar globalContext = new ValidatorContext();\n\tvar currentLanguage;\n\tvar customErrorReporter;\n\tvar api = {\n\t\tsetErrorReporter: function (reporter) {\n\t\t\tif (typeof reporter === 'string') {\n\t\t\t\treturn this.language(reporter);\n\t\t\t}\n\t\t\tcustomErrorReporter = reporter;\n\t\t\treturn true;\n\t\t},\n\t\taddFormat: function () {\n\t\t\tglobalContext.addFormat.apply(globalContext, arguments);\n\t\t},\n\t\tlanguage: function (code) {\n\t\t\tif (!code) {\n\t\t\t\treturn currentLanguage;\n\t\t\t}\n\t\t\tif (!languages[code]) {\n\t\t\t\tcode = code.split('-')[0]; // fall back to base language\n\t\t\t}\n\t\t\tif (languages[code]) {\n\t\t\t\tcurrentLanguage = code;\n\t\t\t\treturn code; // so you can tell if fall-back has happened\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\taddLanguage: function (code, messageMap) {\n\t\t\tvar key;\n\t\t\tfor (key in ErrorCodes) {\n\t\t\t\tif (messageMap[key] && !messageMap[ErrorCodes[key]]) {\n\t\t\t\t\tmessageMap[ErrorCodes[key]] = messageMap[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar rootCode = code.split('-')[0];\n\t\t\tif (!languages[rootCode]) { // use for base language if not yet defined\n\t\t\t\tlanguages[code] = messageMap;\n\t\t\t\tlanguages[rootCode] = messageMap;\n\t\t\t} else {\n\t\t\t\tlanguages[code] = Object.create(languages[rootCode]);\n\t\t\t\tfor (key in messageMap) {\n\t\t\t\t\tif (typeof languages[rootCode][key] === 'undefined') {\n\t\t\t\t\t\tlanguages[rootCode][key] = messageMap[key];\n\t\t\t\t\t}\n\t\t\t\t\tlanguages[code][key] = messageMap[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tfreshApi: function (language) {\n\t\t\tvar result = createApi();\n\t\t\tif (language) {\n\t\t\t\tresult.language(language);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tvalidate: function (data, schema, checkRecursive, banUnknownProperties) {\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\n\t\t\t} : def;\n\t\t\tvar context = new ValidatorContext(globalContext, false, errorReporter, checkRecursive, banUnknownProperties);\n\t\t\tif (typeof schema === \"string\") {\n\t\t\t\tschema = {\"$ref\": schema};\n\t\t\t}\n\t\t\tcontext.addSchema(\"\", schema);\n\t\t\tvar error = context.validateAll(data, schema, null, null, \"\");\n\t\t\tif (!error && banUnknownProperties) {\n\t\t\t\terror = context.banUnknownProperties(data, schema);\n\t\t\t}\n\t\t\tthis.error = error;\n\t\t\tthis.missing = context.missing;\n\t\t\tthis.valid = (error === null);\n\t\t\treturn this.valid;\n\t\t},\n\t\tvalidateResult: function () {\n\t\t\tvar result = {};\n\t\t\tthis.validate.apply(result, arguments);\n\t\t\treturn result;\n\t\t},\n\t\tvalidateMultiple: function (data, schema, checkRecursive, banUnknownProperties) {\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\n\t\t\t} : def;\n\t\t\tvar context = new ValidatorContext(globalContext, true, errorReporter, checkRecursive, banUnknownProperties);\n\t\t\tif (typeof schema === \"string\") {\n\t\t\t\tschema = {\"$ref\": schema};\n\t\t\t}\n\t\t\tcontext.addSchema(\"\", schema);\n\t\t\tcontext.validateAll(data, schema, null, null, \"\");\n\t\t\tif (banUnknownProperties) {\n\t\t\t\tcontext.banUnknownProperties(data, schema);\n\t\t\t}\n\t\t\tvar result = {};\n\t\t\tresult.errors = context.errors;\n\t\t\tresult.missing = context.missing;\n\t\t\tresult.valid = (result.errors.length === 0);\n\t\t\treturn result;\n\t\t},\n\t\taddSchema: function () {\n\t\t\treturn globalContext.addSchema.apply(globalContext, arguments);\n\t\t},\n\t\tgetSchema: function () {\n\t\t\treturn globalContext.getSchema.apply(globalContext, arguments);\n\t\t},\n\t\tgetSchemaMap: function () {\n\t\t\treturn globalContext.getSchemaMap.apply(globalContext, arguments);\n\t\t},\n\t\tgetSchemaUris: function () {\n\t\t\treturn globalContext.getSchemaUris.apply(globalContext, arguments);\n\t\t},\n\t\tgetMissingUris: function () {\n\t\t\treturn globalContext.getMissingUris.apply(globalContext, arguments);\n\t\t},\n\t\tdropSchemas: function () {\n\t\t\tglobalContext.dropSchemas.apply(globalContext, arguments);\n\t\t},\n\t\tdefineKeyword: function () {\n\t\t\tglobalContext.defineKeyword.apply(globalContext, arguments);\n\t\t},\n\t\tdefineError: function (codeName, codeNumber, defaultMessage) {\n\t\t\tif (typeof codeName !== 'string' || !/^[A-Z]+(_[A-Z]+)*$/.test(codeName)) {\n\t\t\t\tthrow new Error('Code name must be a string in UPPER_CASE_WITH_UNDERSCORES');\n\t\t\t}\n\t\t\tif (typeof codeNumber !== 'number' || codeNumber%1 !== 0 || codeNumber < 10000) {\n\t\t\t\tthrow new Error('Code number must be an integer > 10000');\n\t\t\t}\n\t\t\tif (typeof ErrorCodes[codeName] !== 'undefined') {\n\t\t\t\tthrow new Error('Error already defined: ' + codeName + ' as ' + ErrorCodes[codeName]);\n\t\t\t}\n\t\t\tif (typeof ErrorCodeLookup[codeNumber] !== 'undefined') {\n\t\t\t\tthrow new Error('Error code already used: ' + ErrorCodeLookup[codeNumber] + ' as ' + codeNumber);\n\t\t\t}\n\t\t\tErrorCodes[codeName] = codeNumber;\n\t\t\tErrorCodeLookup[codeNumber] = codeName;\n\t\t\tErrorMessagesDefault[codeName] = ErrorMessagesDefault[codeNumber] = defaultMessage;\n\t\t\tfor (var langCode in languages) {\n\t\t\t\tvar language = languages[langCode];\n\t\t\t\tif (language[codeName]) {\n\t\t\t\t\tlanguage[codeNumber] = language[codeNumber] || language[codeName];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\treset: function () {\n\t\t\tglobalContext.reset();\n\t\t\tthis.error = null;\n\t\t\tthis.missing = [];\n\t\t\tthis.valid = true;\n\t\t},\n\t\tmissing: [],\n\t\terror: null,\n\t\tvalid: true,\n\t\tnormSchema: normSchema,\n\t\tresolveUrl: resolveUrl,\n\t\tgetDocumentUri: getDocumentUri,\n\t\terrorCodes: ErrorCodes\n\t};\n\tapi.language(language || 'en');\n\treturn api;\n}\n\nvar tv4 = createApi();\ntv4.addLanguage('en-gb', ErrorMessagesDefault);\n\n//legacy property\ntv4.tv4 = tv4;\n\nreturn tv4; // used by _header.js to globalise.\n\n}));"]}