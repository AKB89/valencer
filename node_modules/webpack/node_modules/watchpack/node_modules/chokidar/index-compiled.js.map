{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\nvar EventEmitter = require('events').EventEmitter;\nvar fs = require('fs');\nvar sysPath = require('path');\nvar asyncEach = require('async-each');\nvar anymatch = require('anymatch');\nvar globParent = require('glob-parent');\nvar isGlob = require('is-glob');\nvar isAbsolute = require('path-is-absolute');\nvar inherits = require('inherits');\n\nvar NodeFsHandler = require('./lib/nodefs-handler');\nvar FsEventsHandler = require('./lib/fsevents-handler');\n\nvar arrify = function(value) {\n  if (value == null) return [];\n  return Array.isArray(value) ? value : [value];\n};\n\nvar flatten = function(list, result) {\n  if (result == null) result = [];\n  list.forEach(function(item) {\n    if (Array.isArray(item)) {\n      flatten(item, result);\n    } else {\n      result.push(item);\n    }\n  });\n  return result;\n};\n\n// Little isString util for use in Array#every.\nvar isString = function(thing) {\n  return typeof thing === 'string';\n};\n\n// Public: Main class.\n// Watches files & directories for changes.\n//\n// * _opts - object, chokidar options hash\n//\n// Emitted events:\n// `add`, `addDir`, `change`, `unlink`, `unlinkDir`, `all`, `error`\n//\n// Examples\n//\n//  var watcher = new FSWatcher()\n//    .add(directories)\n//    .on('add', path => console.log('File', path, 'was added'))\n//    .on('change', path => console.log('File', path, 'was changed'))\n//    .on('unlink', path => console.log('File', path, 'was removed'))\n//    .on('all', (event, path) => console.log(path, ' emitted ', event))\n//\nfunction FSWatcher(_opts) {\n  EventEmitter.call(this);\n  var opts = {};\n  // in case _opts that is passed in is a frozen object\n  if (_opts) for (var opt in _opts) opts[opt] = _opts[opt];\n  this._watched = Object.create(null);\n  this._closers = Object.create(null);\n  this._ignoredPaths = Object.create(null);\n  Object.defineProperty(this, '_globIgnored', {\n    get: function() { return Object.keys(this._ignoredPaths); }\n  });\n  this.closed = false;\n  this._throttled = Object.create(null);\n  this._symlinkPaths = Object.create(null);\n\n  function undef(key) {\n    return opts[key] === undefined;\n  }\n\n  // Set up default options.\n  if (undef('persistent')) opts.persistent = true;\n  if (undef('ignoreInitial')) opts.ignoreInitial = false;\n  if (undef('ignorePermissionErrors')) opts.ignorePermissionErrors = false;\n  if (undef('interval')) opts.interval = 100;\n  if (undef('binaryInterval')) opts.binaryInterval = 300;\n  this.enableBinaryInterval = opts.binaryInterval !== opts.interval;\n\n  // Enable fsevents on OS X when polling isn't explicitly enabled.\n  if (undef('useFsEvents')) opts.useFsEvents = !opts.usePolling;\n\n  // If we can't use fsevents, ensure the options reflect it's disabled.\n  if (!FsEventsHandler.canUse()) opts.useFsEvents = false;\n\n  // Use polling on Mac if not using fsevents.\n  // Other platforms use non-polling fs.watch.\n  if (undef('usePolling') && !opts.useFsEvents) {\n    opts.usePolling = process.platform === 'darwin';\n  }\n\n  // Editor atomic write normalization enabled by default with fs.watch\n  if (undef('atomic')) opts.atomic = !opts.usePolling && !opts.useFsEvents;\n  if (opts.atomic) this._pendingUnlinks = Object.create(null);\n\n  if (undef('followSymlinks')) opts.followSymlinks = true;\n\n  if (undef('awaitWriteFinish')) opts.awaitWriteFinish = false;\n  if (opts.awaitWriteFinish === true) opts.awaitWriteFinish = {};\n  var awf = opts.awaitWriteFinish;\n  if (awf) {\n    if (!awf.stabilityThreshold) awf.stabilityThreshold = 2000;\n    if (!awf.pollInterval) awf.pollInterval = 100;\n\n    this._pendingWrites = Object.create(null);\n  }\n  if (opts.ignored) opts.ignored = arrify(opts.ignored);\n\n  this._isntIgnored = function(path, stat) {\n    return !this._isIgnored(path, stat);\n  }.bind(this);\n\n  var readyCalls = 0;\n  this._emitReady = function() {\n    if (++readyCalls >= this._readyCount) {\n      this._emitReady = Function.prototype;\n      this._readyEmitted = true;\n      // use process.nextTick to allow time for listener to be bound\n      process.nextTick(this.emit.bind(this, 'ready'));\n    }\n  }.bind(this);\n\n  this.options = opts;\n\n  // You’re frozen when your heart’s not open.\n  Object.freeze(opts);\n}\n\ninherits(FSWatcher, EventEmitter);\n\n// Common helpers\n// --------------\n\n// Private method: Normalize and emit events\n//\n// * event     - string, type of event\n// * path      - string, file or directory path\n// * val[1..3] - arguments to be passed with event\n//\n// Returns the error if defined, otherwise the value of the\n// FSWatcher instance's `closed` flag\nFSWatcher.prototype._emit = function(event, path, val1, val2, val3) {\n  if (this.options.cwd) path = sysPath.relative(this.options.cwd, path);\n  var args = [event, path];\n  if (val3 !== undefined) args.push(val1, val2, val3);\n  else if (val2 !== undefined) args.push(val1, val2);\n  else if (val1 !== undefined) args.push(val1);\n\n  var awf = this.options.awaitWriteFinish;\n  if (awf && this._pendingWrites[path]) {\n    this._pendingWrites[path].lastChange = new Date();\n    return this;\n  }\n\n  if (this.options.atomic) {\n    if (event === 'unlink') {\n      this._pendingUnlinks[path] = args;\n      setTimeout(function() {\n        Object.keys(this._pendingUnlinks).forEach(function(path) {\n          this.emit.apply(this, this._pendingUnlinks[path]);\n          this.emit.apply(this, ['all'].concat(this._pendingUnlinks[path]));\n          delete this._pendingUnlinks[path];\n        }.bind(this));\n      }.bind(this), typeof this.options.atomic === \"number\"\n        ? this.options.atomic\n        : 100);\n      return this;\n    } else if (event === 'add' && this._pendingUnlinks[path]) {\n      event = args[0] = 'change';\n      delete this._pendingUnlinks[path];\n    }\n  }\n\n  var emitEvent = function() {\n    this.emit.apply(this, args);\n    if (event !== 'error') this.emit.apply(this, ['all'].concat(args));\n  }.bind(this);\n\n  if (awf && (event === 'add' || event === 'change') && this._readyEmitted) {\n    var awfEmit = function(err, stats) {\n      if (err) {\n        event = args[0] = 'error';\n        args[1] = err;\n        emitEvent();\n      } else if (stats) {\n        // if stats doesn't exist the file must have been deleted\n        if (args.length > 2) {\n          args[2] = stats;\n        } else {\n          args.push(stats);\n        }\n        emitEvent();\n      }\n    };\n\n    this._awaitWriteFinish(path, awf.stabilityThreshold, event, awfEmit);\n    return this;\n  }\n\n  if (event === 'change') {\n    if (!this._throttle('change', path, 50)) return this;\n  }\n\n  if (\n    this.options.alwaysStat && val1 === undefined &&\n    (event === 'add' || event === 'addDir' || event === 'change')\n  ) {\n    fs.stat(path, function(error, stats) {\n      // Suppress event when fs.stat fails, to avoid sending undefined 'stat'\n      if (error || !stats) return;\n\n      args.push(stats);\n      emitEvent();\n    });\n  } else {\n    emitEvent();\n  }\n\n  return this;\n};\n\n// Private method: Common handler for errors\n//\n// * error  - object, Error instance\n//\n// Returns the error if defined, otherwise the value of the\n// FSWatcher instance's `closed` flag\nFSWatcher.prototype._handleError = function(error) {\n  var code = error && error.code;\n  var ipe = this.options.ignorePermissionErrors;\n  if (error &&\n    code !== 'ENOENT' &&\n    code !== 'ENOTDIR' &&\n    (!ipe || (code !== 'EPERM' && code !== 'EACCES'))\n  ) this.emit('error', error);\n  return error || this.closed;\n};\n\n// Private method: Helper utility for throttling\n//\n// * action  - string, type of action being throttled\n// * path    - string, path being acted upon\n// * timeout - int, duration of time to suppress duplicate actions\n//\n// Returns throttle tracking object or false if action should be suppressed\nFSWatcher.prototype._throttle = function(action, path, timeout) {\n  if (!(action in this._throttled)) {\n    this._throttled[action] = Object.create(null);\n  }\n  var throttled = this._throttled[action];\n  if (path in throttled) return false;\n  function clear() {\n    delete throttled[path];\n    clearTimeout(timeoutObject);\n  }\n  var timeoutObject = setTimeout(clear, timeout);\n  throttled[path] = {timeoutObject: timeoutObject, clear: clear};\n  return throttled[path];\n};\n\n// Private method: Awaits write operation to finish\n//\n// * path    - string, path being acted upon\n// * threshold - int, time in milliseconds a file size must be fixed before\n//                    acknowledgeing write operation is finished\n// * awfEmit - function, to be called when ready for event to be emitted\n// Polls a newly created file for size variations. When files size does not\n// change for 'threshold' milliseconds calls callback.\nFSWatcher.prototype._awaitWriteFinish = function(path, threshold, event, awfEmit) {\n  var timeoutHandler;\n\n  var fullPath = path;\n  if (this.options.cwd && !isAbsolute(path)) {\n    fullPath = sysPath.join(this.options.cwd, path);\n  }\n\n  var now = new Date();\n\n  var awaitWriteFinish = (function (prevStat) {\n    fs.stat(fullPath, function(err, curStat) {\n      if (err) {\n        if (err.code !== 'ENOENT') awfEmit(err);\n        return;\n      }\n\n      var now = new Date();\n\n      if (prevStat && curStat.size != prevStat.size) {\n        this._pendingWrites[path].lastChange = now;\n      }\n\n      if (now - this._pendingWrites[path].lastChange >= threshold) {\n        delete this._pendingWrites[path];\n        awfEmit(null, curStat);\n      } else {\n        timeoutHandler = setTimeout(\n          awaitWriteFinish.bind(this, curStat),\n          this.options.awaitWriteFinish.pollInterval\n        );\n      }\n    }.bind(this));\n  }.bind(this));\n\n  if (!(path in this._pendingWrites)) {\n    this._pendingWrites[path] = {\n      lastChange: now,\n      cancelWait: function() {\n        delete this._pendingWrites[path];\n        clearTimeout(timeoutHandler);\n        return event;\n      }.bind(this)\n    };\n    timeoutHandler = setTimeout(\n      awaitWriteFinish.bind(this),\n      this.options.awaitWriteFinish.pollInterval\n    );\n  }\n};\n\n// Private method: Determines whether user has asked to ignore this path\n//\n// * path  - string, path to file or directory\n// * stats - object, result of fs.stat\n//\n// Returns boolean\nvar dotRe = /\\..*\\.(sw[px])$|\\~$|\\.subl.*\\.tmp/;\nFSWatcher.prototype._isIgnored = function(path, stats) {\n  if (this.options.atomic && dotRe.test(path)) return true;\n\n  if (!this._userIgnored) {\n    var cwd = this.options.cwd;\n    var ignored = this.options.ignored;\n    if (cwd && ignored) {\n      ignored = ignored.map(function (path) {\n        if (typeof path !== 'string') return path;\n        return isAbsolute(path) ? path : sysPath.join(cwd, path);\n      });\n    }\n    var paths = arrify(ignored)\n      .filter(function(path) {\n        return typeof path === 'string' && !isGlob(path);\n      }).map(function(path) {\n        return path + '/**';\n      });\n    this._userIgnored = anymatch(\n      this._globIgnored.concat(ignored).concat(paths)\n    );\n  }\n\n  return this._userIgnored([path, stats]);\n};\n\n// Private method: Provides a set of common helpers and properties relating to\n// symlink and glob handling\n//\n// * path - string, file, directory, or glob pattern being watched\n// * depth - int, at any depth > 0, this isn't a glob\n//\n// Returns object containing helpers for this path\nvar replacerRe = /^\\.[\\/\\\\]/;\nFSWatcher.prototype._getWatchHelpers = function(path, depth) {\n  path = path.replace(replacerRe, '');\n  var watchPath = depth || !isGlob(path) ? path : globParent(path);\n  var fullWatchPath = sysPath.resolve(watchPath);\n  var hasGlob = watchPath !== path;\n  var globFilter = hasGlob ? anymatch(path) : false;\n  var follow = this.options.followSymlinks;\n  var globSymlink = hasGlob && follow ? null : false;\n\n  var checkGlobSymlink = function(entry) {\n    // only need to resolve once\n    // first entry should always have entry.parentDir === ''\n    if (globSymlink == null) {\n      globSymlink = entry.fullParentDir === fullWatchPath ? false : {\n        realPath: entry.fullParentDir,\n        linkPath: fullWatchPath\n      };\n    }\n\n    if (globSymlink) {\n      return entry.fullPath.replace(globSymlink.realPath, globSymlink.linkPath);\n    }\n\n    return entry.fullPath;\n  };\n\n  var entryPath = function(entry) {\n    return sysPath.join(watchPath,\n      sysPath.relative(watchPath, checkGlobSymlink(entry))\n    );\n  };\n\n  var filterPath = function(entry) {\n    var resolvedPath = entryPath(entry);\n    return (!hasGlob || globFilter(resolvedPath)) &&\n      this._isntIgnored(resolvedPath, entry.stat) &&\n      (this.options.ignorePermissionErrors ||\n        this._hasReadPermissions(entry.stat));\n  }.bind(this);\n\n  var getDirParts = function(path) {\n    if (!hasGlob) return false;\n    var parts = sysPath.relative(watchPath, path).split(/[\\/\\\\]/);\n    return parts;\n  };\n\n  var dirParts = getDirParts(path);\n  if (dirParts && dirParts.length > 1) dirParts.pop();\n  var unmatchedGlob;\n\n  var filterDir = function(entry) {\n    if (hasGlob) {\n      var entryParts = getDirParts(checkGlobSymlink(entry));\n      var globstar = false;\n      unmatchedGlob = !dirParts.every(function(part, i) {\n        if (part === '**') globstar = true;\n        return globstar || !entryParts[i] || anymatch(part, entryParts[i]);\n      });\n    }\n    return !unmatchedGlob && this._isntIgnored(entryPath(entry), entry.stat);\n  }.bind(this);\n\n  return {\n    followSymlinks: follow,\n    statMethod: follow ? 'stat' : 'lstat',\n    path: path,\n    watchPath: watchPath,\n    entryPath: entryPath,\n    hasGlob: hasGlob,\n    globFilter: globFilter,\n    filterPath: filterPath,\n    filterDir: filterDir\n  };\n};\n\n// Directory helpers\n// -----------------\n\n// Private method: Provides directory tracking objects\n//\n// * directory - string, path of the directory\n//\n// Returns the directory's tracking object\nFSWatcher.prototype._getWatchedDir = function(directory) {\n  var dir = sysPath.resolve(directory);\n  var watcherRemove = this._remove.bind(this);\n  if (!(dir in this._watched)) this._watched[dir] = {\n    _items: Object.create(null),\n    add: function(item) {\n      if (item !== '.') this._items[item] = true;\n    },\n    remove: function(item) {\n      delete this._items[item];\n      if (!this.children().length) {\n        fs.readdir(dir, function(err) {\n          if (err) watcherRemove(sysPath.dirname(dir), sysPath.basename(dir));\n        });\n      }\n    },\n    has: function(item) {return item in this._items;},\n    children: function() {return Object.keys(this._items);}\n  };\n  return this._watched[dir];\n};\n\n// File helpers\n// ------------\n\n// Private method: Check for read permissions\n// Based on this answer on SO: http://stackoverflow.com/a/11781404/1358405\n//\n// * stats - object, result of fs.stat\n//\n// Returns boolean\nFSWatcher.prototype._hasReadPermissions = function(stats) {\n  return Boolean(4 & parseInt(((stats && stats.mode) & 0x1ff).toString(8)[0], 10));\n};\n\n// Private method: Handles emitting unlink events for\n// files and directories, and via recursion, for\n// files and directories within directories that are unlinked\n//\n// * directory - string, directory within which the following item is located\n// * item      - string, base path of item/directory\n//\n// Returns nothing\nFSWatcher.prototype._remove = function(directory, item) {\n  // if what is being deleted is a directory, get that directory's paths\n  // for recursive deleting and cleaning of watched object\n  // if it is not a directory, nestedDirectoryChildren will be empty array\n  var path = sysPath.join(directory, item);\n  var fullPath = sysPath.resolve(path);\n  var isDirectory = this._watched[path] || this._watched[fullPath];\n\n  // prevent duplicate handling in case of arriving here nearly simultaneously\n  // via multiple paths (such as _handleFile and _handleDir)\n  if (!this._throttle('remove', path, 100)) return;\n\n  // if the only watched file is removed, watch for its return\n  var watchedDirs = Object.keys(this._watched);\n  if (!isDirectory && !this.options.useFsEvents && watchedDirs.length === 1) {\n    this.add(directory, item, true);\n  }\n\n  // This will create a new entry in the watched object in either case\n  // so we got to do the directory check beforehand\n  var nestedDirectoryChildren = this._getWatchedDir(path).children();\n\n  // Recursively remove children directories / files.\n  nestedDirectoryChildren.forEach(function(nestedItem) {\n    this._remove(path, nestedItem);\n  }, this);\n\n  // Check if item was on the watched list and remove it\n  var parent = this._getWatchedDir(directory);\n  var wasTracked = parent.has(item);\n  parent.remove(item);\n\n  // If we wait for this file to be fully written, cancel the wait.\n  var relPath = path;\n  if (this.options.cwd) relPath = sysPath.relative(this.options.cwd, path);\n  if (this.options.awaitWriteFinish && this._pendingWrites[relPath]) {\n    var event = this._pendingWrites[relPath].cancelWait();\n    if (event === 'add') return;\n  }\n\n  // The Entry will either be a directory that just got removed\n  // or a bogus entry to a file, in either case we have to remove it\n  delete this._watched[path];\n  delete this._watched[fullPath];\n  var eventName = isDirectory ? 'unlinkDir' : 'unlink';\n  if (wasTracked && !this._isIgnored(path)) this._emit(eventName, path);\n\n  // Avoid conflicts if we later create another file with the same name\n  if (!this.options.useFsEvents) {\n    this._closePath(path);\n  }\n};\n\nFSWatcher.prototype._closePath = function(path) {\n  if (!this._closers[path]) return;\n  this._closers[path]();\n  delete this._closers[path];\n  this._getWatchedDir(sysPath.dirname(path)).remove(sysPath.basename(path));\n}\n\n// Public method: Adds paths to be watched on an existing FSWatcher instance\n\n// * paths     - string or array of strings, file/directory paths and/or globs\n// * _origAdd  - private boolean, for handling non-existent paths to be watched\n// * _internal - private boolean, indicates a non-user add\n\n// Returns an instance of FSWatcher for chaining.\nFSWatcher.prototype.add = function(paths, _origAdd, _internal) {\n  var cwd = this.options.cwd;\n  this.closed = false;\n  paths = flatten(arrify(paths));\n\n  if (!paths.every(isString)) {\n    throw new TypeError('Non-string provided as watch path: ' + paths);\n  }\n\n  if (cwd) paths = paths.map(function(path) {\n    if (isAbsolute(path)) {\n      return path;\n    } else if (path[0] === '!') {\n      return '!' + sysPath.join(cwd, path.substring(1));\n    } else {\n      return sysPath.join(cwd, path);\n    }\n  });\n\n  // set aside negated glob strings\n  paths = paths.filter(function(path) {\n    if (path[0] === '!') {\n      this._ignoredPaths[path.substring(1)] = true;\n    } else {\n      // if a path is being added that was previously ignored, stop ignoring it\n      delete this._ignoredPaths[path];\n      delete this._ignoredPaths[path + '/**'];\n\n      // reset the cached userIgnored anymatch fn\n      // to make ignoredPaths changes effective\n      this._userIgnored = null;\n\n      return true;\n    }\n  }, this);\n\n  if (this.options.useFsEvents && FsEventsHandler.canUse()) {\n    if (!this._readyCount) this._readyCount = paths.length;\n    if (this.options.persistent) this._readyCount *= 2;\n    paths.forEach(this._addToFsEvents, this);\n  } else {\n    if (!this._readyCount) this._readyCount = 0;\n    this._readyCount += paths.length;\n    asyncEach(paths, function(path, next) {\n      this._addToNodeFs(path, !_internal, 0, 0, _origAdd, function(err, res) {\n        if (res) this._emitReady();\n        next(err, res);\n      }.bind(this));\n    }.bind(this), function(error, results) {\n      results.forEach(function(item) {\n        if (!item) return;\n        this.add(sysPath.dirname(item), sysPath.basename(_origAdd || item));\n      }, this);\n    }.bind(this));\n  }\n\n  return this;\n};\n\n// Public method: Close watchers or start ignoring events from specified paths.\n\n// * paths     - string or array of strings, file/directory paths and/or globs\n\n// Returns instance of FSWatcher for chaining.\nFSWatcher.prototype.unwatch = function(paths) {\n  if (this.closed) return this;\n  paths = flatten(arrify(paths));\n\n  paths.forEach(function(path) {\n    // convert to absolute path unless relative path already matches\n    if (!isAbsolute(path) && !this._closers[path]) {\n      if (this.options.cwd) path = sysPath.join(this.options.cwd, path);\n      path = sysPath.resolve(path);\n    }\n\n    this._closePath(path);\n\n    this._ignoredPaths[path] = true;\n    if (path in this._watched) {\n      this._ignoredPaths[path + '/**'] = true;\n    }\n\n    // reset the cached userIgnored anymatch fn\n    // to make ignoredPaths changes effective\n    this._userIgnored = null;\n  }, this);\n\n  return this;\n};\n\n// Public method: Close watchers and remove all listeners from watched paths.\n\n// Returns instance of FSWatcher for chaining.\nFSWatcher.prototype.close = function() {\n  if (this.closed) return this;\n\n  this.closed = true;\n  Object.keys(this._closers).forEach(function(watchPath) {\n    this._closers[watchPath]();\n    delete this._closers[watchPath];\n  }, this);\n  this._watched = Object.create(null);\n\n  this.removeAllListeners();\n  return this;\n};\n\n// Public method: Expose list of watched paths\n\n// Returns object w/ dir paths as keys and arrays of contained paths as values.\nFSWatcher.prototype.getWatched = function() {\n  var watchList = {};\n  Object.keys(this._watched).forEach(function(dir) {\n    var key = this.options.cwd ? sysPath.relative(this.options.cwd, dir) : dir;\n    watchList[key || '.'] = Object.keys(this._watched[dir]._items).sort();\n  }.bind(this));\n  return watchList;\n};\n\n// Attach watch handler prototype methods\nfunction importHandler(handler) {\n  Object.keys(handler.prototype).forEach(function(method) {\n    FSWatcher.prototype[method] = handler.prototype[method];\n  });\n}\nimportHandler(NodeFsHandler);\nif (FsEventsHandler.canUse()) importHandler(FsEventsHandler);\n\n// Export FSWatcher class\nexports.FSWatcher = FSWatcher;\n\n// Public function: Instantiates watcher with paths to be tracked.\n\n// * paths     - string or array of strings, file/directory paths and/or globs\n// * options   - object, chokidar options\n\n// Returns an instance of FSWatcher for chaining.\nexports.watch = function(paths, options) {\n  return new FSWatcher(options).add(paths);\n};\n"]}