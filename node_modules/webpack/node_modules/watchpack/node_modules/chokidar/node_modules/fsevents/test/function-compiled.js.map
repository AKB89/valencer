{"version":3,"sources":["function.js"],"names":[],"mappings":"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","file":"function-compiled.js","sourcesContent":["/*\n  Â© 2014 by Philipp Dunkel <pip@pipobscure.com>\n  Licensed under MIT License.\n */\n\n/* jshint node:true */\n'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar test = require('tap').test;\n\ntest('functionality testing', function(t) {\n  try {\n    fs.mkdirSync(__dirname + '/temp');\n  } catch (ex) {}\n  var evt = require('../')(__dirname + '/temp').start();\n  t.on('end', function() {\n    evt.stop();\n  });\n  t.plan(16);\n\n  evt.on('fsevent', function(name, flags, id) {\n    console.error(\"id:\\t\" + id);\n    console.error(\"flags:\\t\" + JSON.stringify(flags));\n    if (name === __dirname + '/temp') return;\n    if (path.basename(name) === 'created-fsevent') {\n      t.ok('number' === typeof flags, 'created file was caught with flags:' + flags);\n      t.ok('number' === typeof id, 'id is a number ' + id);\n    }\n    if (path.basename(name) === 'moved-fsevent') {\n      t.ok('number' === typeof flags, 'renamed file was caught with flags:' + flags);\n      t.ok('number' === typeof id, 'id is a number ' + id);\n    }\n  });\n\n  evt.on('change', function(name, info) {\n    console.error(\"name:\\t\" + name);\n    console.error(\"base:\\t\" + path.basename(name));\n    console.error(\"event:\\t\" + info.event);\n    console.error(\"info:\\t\" + JSON.stringify(info));\n    if (name === __dirname + '/temp') return;\n    t.ok(name === info.path, 'matched path');\n    switch (info.event) {\n      case 'created':\n      case 'modified':\n        // NOTE(bajtos) The recent versions apparently report `modified` event\n        // instead of `created`.\n        t.ok(path.basename(name) === 'created-fsevent', 'file created: ' + path.basename(name));\n        break;\n      case 'moved-out':\n        t.ok(path.basename(name) === 'created-fsevent', 'file moved out: ' + path.basename(name));\n        break;\n      case 'moved-in':\n        t.ok(path.basename(name) === 'moved-fsevent', 'file moved in: ' + path.basename(name));\n        break;\n      case 'deleted':\n        t.ok(path.basename(name) === 'moved-fsevent', 'file deleted: ' + path.basename(name));\n        break;\n      default:\n        t.ok(false, 'Uknown event type: ' + info.event);\n        break;\n    }\n  });\n\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\twriteFileSync(__dirname + '/temp/created-fsevent', 'created-fsevent');\");\n    fs.writeFileSync(__dirname + '/temp/created-fsevent', 'created-fsevent');\n\n    console.error(\"===========================================================================\");\n  }, 500);\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\trenameSync(__dirname + '/temp/created-fsevent', __dirname + '/temp/moved-fsevent');\");\n    fs.renameSync(__dirname + '/temp/created-fsevent', __dirname + '/temp/moved-fsevent');\n\n    console.error(\"===========================================================================\");\n\n  }, 1000);\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\tunlinkSync(__dirname + '/temp/moved-fsevent');\");\n    fs.unlinkSync(__dirname + '/temp/moved-fsevent');\n    console.error(\"===========================================================================\");\n  }, 1500);\n  setTimeout(function() {\n    console.error(\"===========================================================================\");\n    console.error(\"\\trmdirSync(__dirname + '/temp');\");\n    fs.rmdirSync(__dirname + '/temp');\n    console.error(\"===========================================================================\");\n  }, 2000);\n});\n"]}