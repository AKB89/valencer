{"version":3,"sources":["build.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,OAAP,GAAiB,UAAU,KAA3B;;AAEA,QAAQ,KAAR,GAAgB,qEAAhB;;AAEA,IAAI,UAAU,QAAQ,mBAAR,CAAd;AACA,IAAI,kBAAkB,QAAQ,2BAAR,CAAtB;AACA,IAAI,YAAY,QAAQ,gBAAR,CAAhB;;AAEA,SAAS,QAAT,CAAkB,GAAlB,EAAsB,IAAtB,EAA2B,QAA3B,EAAqC;AACjC,oBAAgB,GAAhB,EAAoB,IAApB,EAAyB,UAAS,GAAT,EAAa,MAAb,EAAqB;AAC1C,YAAI,aAAa,CAAC,OAAD,EAAU,MAAV,CAAiB,OAAO,GAAxB,EAA6B,MAA7B,CAAoC,OAAO,GAA3C,CAAjB;AACA,YAAI,OAAO,QAAP,CAAgB,MAAhB,GAAyB,CAA7B,EAAgC;AAC5B,yBAAa,WACC,MADD,CACQ,CAAC,IAAD,CADR,EAEC,MAFD,CAEQ,OAAO,QAFf,CAAb;AAGH;AACD,gBAAQ,OAAR,CAAgB,UAAhB,EAA2B,OAAO,IAAlC,EAAuC,UAAS,GAAT,EAAc;AACjD,mBAAO,SAAS,GAAT,CAAP;AACH,SAFD;AAGH,KAVD;AAWH;;AAED,SAAS,KAAT,CAAe,GAAf,EAAoB,IAApB,EAA0B,QAA1B,EAAoC;;;;;AAKhC,QAAI,KAAK,MAAL,IAAgB,KAAK,OAAL,CAAa,SAAb,IAA0B,CAAC,CAA/C,EAAmD;;;AAG/C,gBAAQ,OAAR,CAAgB,CAAC,OAAD,CAAhB,EAA0B,EAA1B,EAA6B,UAAS,GAAT,EAAc;AACvC,gBAAI,GAAJ,EAAS,OAAO,SAAS,GAAT,CAAP;AACT,sBAAU,GAAV,EAAc,IAAd,EAAmB,UAAS,GAAT,EAAc;AAC7B,oBAAI,GAAJ,EAAS,OAAO,SAAS,GAAT,CAAP;AACT,uBAAO,SAAS,GAAT,EAAa,IAAb,EAAkB,QAAlB,CAAP;AACH,aAHD;AAIH,SAND;AAOH,KAVD,MAUO;AACH,eAAO,SAAS,GAAT,EAAa,IAAb,EAAkB,QAAlB,CAAP;AACH;AACJ","file":"build-compiled.js","sourcesContent":["\"use strict\";\n\nmodule.exports = exports = build;\n\nexports.usage = 'Attempts to compile the module by dispatching to node-gyp or nw-gyp';\n\nvar compile = require('./util/compile.js');\nvar handle_gyp_opts = require('./util/handle_gyp_opts.js');\nvar configure = require('./configure.js');\n\nfunction do_build(gyp,argv,callback) {\n    handle_gyp_opts(gyp,argv,function(err,result) {\n        var final_args = ['build'].concat(result.gyp).concat(result.pre);\n        if (result.unparsed.length > 0) {\n            final_args = final_args.\n                          concat(['--']).\n                          concat(result.unparsed);\n        }\n        compile.run_gyp(final_args,result.opts,function(err) {\n            return callback(err);\n        });\n    });\n}\n\nfunction build(gyp, argv, callback) {\n\n    // Form up commands to pass to node-gyp:\n    // We map `node-pre-gyp build` to `node-gyp configure build` so that we do not\n    // trigger a clean and therefore do not pay the penalty of a full recompile\n    if (argv.length && (argv.indexOf('rebuild') > -1)) {\n        // here we map `node-pre-gyp rebuild` to `node-gyp rebuild` which internally means\n        // \"clean + configure + build\" and triggers a full recompile\n        compile.run_gyp(['clean'],{},function(err) {\n            if (err) return callback(err);\n            configure(gyp,argv,function(err) {\n                if (err) return callback(err);\n                return do_build(gyp,argv,callback);\n            });\n        });\n    } else {\n        return do_build(gyp,argv,callback);        \n    }\n}\n"]}