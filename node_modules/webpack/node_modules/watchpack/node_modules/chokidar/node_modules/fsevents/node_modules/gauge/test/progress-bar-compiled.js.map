{"version":3,"sources":["progress-bar.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,OAAO,QAAQ,KAAR,EAAe,IAA1B;AACA,IAAI,cAAc,QAAQ,oBAAR,CAAlB;;AAEA,IAAI,SAAS,EAAb;AACA,IAAI,CAAJ;AACA,IAAI,MAAM,IAAI,WAAJ,CAAgB,EAAC,OAAO,YAAY,KAApB,EAA2B,oBAAoB,CAA/C,EAAhB,EAAmE,IAAI;AAC/E,QAAM,YAAY;AAChB,WAAO,IAAP,CAAY,CAAC,MAAD,CAAZ;AACA,WAAO,CAAP;AACD,GAJ8E;AAK/E,QAAM,YAAY;AAChB,WAAO,IAAP,CAAY,CAAC,MAAD,CAAZ;AACA,WAAO,CAAP;AACD,GAR8E;AAS/E,MAAI,UAAU,KAAV,EAAiB;AACnB,WAAO,IAAP,CAAY,CAAC,IAAD,EAAM,KAAN,CAAZ;AACA,WAAO,CAAP;AACD,GAZ8E;AAa/E,sBAAoB,UAAU,GAAV,EAAe;AACjC,WAAO,IAAP,CAAY,CAAC,oBAAD,EAAuB,GAAvB,CAAZ;AACA,WAAO,CAAP;AACD,GAhB8E;AAiB/E,aAAW,YAAY;AACrB,WAAO,IAAP,CAAY,CAAC,WAAD,CAAZ;AACA,WAAO,CAAP;AACD,GApB8E;AAqB/E,SAAO,UAAU,IAAV,EAAgB;AACrB,WAAO,IAAP,CAAY,CAAC,OAAD,EAAU,IAAV,CAAZ;AACA,WAAO,CAAP;AACD;AAxB8E,CAAvE,CAAV;;AA4BA,SAAS,QAAT,CAAkB,CAAlB,EAAqB,GAArB,EAA0B,MAA1B,EAAkC;AAChC,MAAI,QAAQ,EAAZ;AACA,OAAK,IAAI,KAAK,CAAd,EAAiB,KAAG,OAAO,MAA3B,EAAmC,EAAE,EAArC,EAAyC;AACvC,SAAK,IAAI,KAAK,CAAd,EAAiB,KAAG,OAAO,EAAP,EAAW,MAA/B,EAAuC,EAAE,EAAzC,EAA6C;AAC3C,YAAM,IAAN,CAAW,EAAC,KAAK,EAAN,EAAU,KAAK,EAAf,EAAX;AACD;AACF;AACD,QAAM,OAAN,CAAc,UAAS,IAAT,EAAe;AAC3B,MAAE,EAAF,CAAK,OAAO,KAAK,GAAZ,IAAmB,OAAO,KAAK,GAAZ,EAAiB,KAAK,GAAtB,CAAnB,GAAgD,IAArD,EACK,OAAO,KAAK,GAAZ,EAAiB,KAAK,GAAtB,CADL,EAEK,MAAM,IAAN,GAAa,OAAO,KAAK,GAAZ,CAAb,IAAiC,KAAK,GAAL,GAAW,WAAS,KAAK,GAAzB,GAA+B,EAAhE,CAFL;AAGD,GAJD;AAKD;;AAED,KAAK,MAAL,EAAa,UAAU,CAAV,EAAa;AACxB,IAAE,IAAF,CAAO,EAAP;AACA,UAAQ,MAAR,CAAe,KAAf,GAAuB,KAAvB;AACA,MAAI,IAAJ;AACA,IAAE,EAAF,CAAK,OAAO,MAAZ,EAAoB,CAApB,EAAuB,qCAAvB;AACA,WAAS,EAAT;AACA,UAAQ,MAAR,CAAe,KAAf,GAAuB,IAAvB;AACA,MAAI,IAAJ;AACA,WAAS,CAAT,EAAY,wBAAZ,EAAqC,CACnC,CAAC,MAAD,CADmC,E;AAEnC,GAAC,oBAAD,EAAsB,CAAtB,CAFmC,EAGnC,CAAC,WAAD,CAHmC,CAArC;AAIA,WAAS,EAAT;AACA,MAAI,OAAJ,GAAc,IAAd;AACA,MAAI,IAAJ;AACA,WAAS,CAAT,EAAY,oBAAZ,EAAiC,CAC/B,CAAC,MAAD,CAD+B,E;AAE/B,GAAC,IAAD,EAAO,CAAP,CAF+B,EAG/B,CAAC,oBAAD,EAAsB,CAAtB,CAH+B,EAI/B,CAAC,WAAD,CAJ+B,CAAjC;AAKD,CApBD;;AAsBA,KAAK,gBAAL,EAAuB,UAAU,CAAV,EAAa;AAClC,IAAE,IAAF,CAAO,EAAP;AACA,UAAQ,MAAR,CAAe,OAAf,GAAyB,EAAzB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,MAAP,EAAD,CAArC,EAAsD,EAAC,MAAM,MAAP,EAAtD,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,MAAb,EAAqB,mBAArB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,eAAP,EAAD,CAArC,EAA+D,EAAC,WAAW,CAAZ,EAA/D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,QAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,eAAP,EAAD,CAArC,EAA+D,EAAC,WAAW,GAAZ,EAA/D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,SAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,eAAP,EAAD,CAArC,EAA+D,EAAC,WAAW,CAAZ,EAA/D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,UAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,eAAP,EAAD,CAArC,EAA+D,EAAC,WAAW,CAAC,GAAb,EAA/D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,kBAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,eAAP,EAAD,CAArC,EAA+D,EAAC,WAAW,GAAZ,EAA/D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,mBAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAqC,CAAC,EAAC,MAAM,MAAP,EAAD,EAAgB,EAAC,MAAM,eAAP,EAAhB,CAArC,EAA8E,EAAC,MAAM,MAAP,EAAe,WAAW,GAA1B,EAA9E,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,YAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,QAAD,CAAtC,EAAkD,EAAlD,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,QAAb,EAAuB,aAAvB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,QAAD,EAAU,EAAC,MAAM,MAAP,EAAV,CAAtC,EAAiE,EAAC,MAAM,MAAP,EAAjE,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,YAAb,EAA2B,mBAA3B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,QAAD,EAAU,EAAC,MAAM,MAAP,EAAe,WAAW,IAA1B,EAAV,CAAtC,EAAkF,EAAC,MAAM,MAAP,EAAlF,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,cAAb,EAA6B,eAA7B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,EAAC,MAAM,MAAP,EAAe,WAAW,IAA1B,EAAD,EAAkC,QAAlC,CAAtC,EAAmF,EAAC,MAAM,MAAP,EAAnF,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,aAAb,EAA4B,gBAA5B;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,GAAD,EAAK,EAAC,MAAM,MAAP,EAAe,WAAW,IAA1B,EAAL,EAAsC,GAAtC,CAAtC,EAAkF,EAAC,MAAM,EAAP,EAAlF,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,IAAb,EAAmB,oBAAnB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,GAAD,EAAK,EAAC,MAAM,MAAP,EAAe,WAAW,IAA1B,EAAL,EAAsC,GAAtC,CAAtC,EAAkF,EAAC,MAAM,MAAP,EAAlF,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,UAAb,EAAyB,iBAAzB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,EAAC,MAAM,SAAP,EAAD,CAAtC,EAA2D,EAAC,SAAS,CAAV,EAA3D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,EAAb,EAAiB,YAAjB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,EAAC,MAAM,SAAP,EAAD,CAAtC,EAA2D,EAAC,SAAS,CAAV,EAA3D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,IAAb,EAAmB,WAAnB;AACA,MAAI,SAAS,IAAI,cAAJ,CAAmB,YAAY,KAA/B,EAAsC,CAAC,EAAC,MAAM,SAAP,EAAD,CAAtC,EAA2D,EAAC,SAAS,EAAV,EAA3D,CAAb;AACA,IAAE,EAAF,CAAK,MAAL,EAAa,GAAb,EAAkB,YAAlB;AACD,CAnCD;;AAqCA,KAAK,cAAL,EAAqB,UAAU,CAAV,EAAa;AAChC,IAAE,IAAF,CAAO,EAAP;;AAEA,UAAQ,MAAR,CAAe,OAAf,GAAyB,EAAzB;AACA,WAAS,EAAT;AACA,UAAQ,MAAR,CAAe,KAAf,GAAuB,KAAvB;AACA,MAAI,QAAJ,CAAa,CAAb,EAAgB,MAAhB,GAAyB,CAAzB;AACA,MAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,CAAT,CAAX;AACA,MAAI,IAAJ,CAAS,MAAT,EAAiB,CAAjB;AACA,IAAE,EAAF,CAAK,OAAO,MAAZ,EAAoB,CAApB,EAAuB,wBAAvB;;AAEA,WAAS,EAAT;AACA,UAAQ,MAAR,CAAe,KAAf,GAAuB,IAAvB;AACA,MAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,CAAT,CAAX;AACA,MAAI,IAAJ,CAAS,MAAT,EAAiB,GAAjB;AACA,WAAS,CAAT,EAAY,uBAAZ,EACE,CAAE,CAAE,MAAF,CAAF,EACE,CAAE,oBAAF,EAAwB,CAAxB,CADF,EAEE,CAAE,OAAF,EAAW,mBAAX,CAFF,EAGE,CAAE,MAAF,CAHF,CADF;;AAMA,MAAI,IAAJ,CAAS,GAAT;AACA,WAAS,EAAT;AACA,MAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,CAAT,CAAX;AACA,MAAI,KAAJ;AACA,WAAS,CAAT,EAAY,gBAAZ,EACE,CAAE,CAAE,IAAF,EAAQ,CAAR,CAAF,EACE,CAAE,MAAF,CADF,EAEE,CAAE,oBAAF,EAAwB,CAAxB,CAFF,EAGE,CAAE,OAAF,EAAW,oBAAX,CAHF,EAIE,CAAE,MAAF,CAJF,CADF;AAMA,WAAS,EAAT;AACA,MAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,CAAT,CAAX;AACA,MAAI,KAAJ,CAAU,GAAV;AACA,WAAS,CAAT,EAAY,gCAAZ,EACE,CAAE,CAAE,IAAF,EAAQ,CAAR,CAAF,EACE,CAAE,MAAF,CADF,EAEE,CAAE,oBAAF,EAAwB,CAAxB,CAFF,EAGE,CAAE,OAAF,EAAW,mBAAX,CAHF,EAIE,CAAE,MAAF,CAJF,CADF;AAMD,CAxCD;;AA0CA,KAAK,iBAAL,EAAwB,UAAU,CAAV,EAAa;AACnC,IAAE,IAAF,CAAO,EAAP;AACA,UAAQ,MAAR,CAAe,KAAf,GAAuB,IAAvB;AACA,UAAQ,MAAR,CAAe,OAAf,GAAyB,EAAzB;AACA,MAAI,IAAJ,CAAS,MAAT,EAAiB,GAAjB;AACA,WAAS,EAAT;AACA,MAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,CAAT,CAAX;AACA,MAAI,KAAJ;AACA,WAAS,CAAT,EAAY,YAAZ,EACE,CAAE,CAAE,IAAF,EAAQ,CAAR,CAAF,EACE,CAAE,MAAF,CADF,EAEE,CAAE,oBAAF,EAAwB,CAAxB,CAFF,EAGE,CAAE,OAAF,EAAW,mCAAX,CAHF,EAIE,CAAE,MAAF,CAJF,CADF;;AAOA,UAAQ,MAAR,CAAe,OAAf,GAAyB,EAAzB;AACA,MAAI,IAAJ,CAAS,MAAT,EAAiB,GAAjB;AACA,WAAS,EAAT;AACA,MAAI,IAAJ,GAAW,IAAI,IAAJ,CAAS,CAAT,CAAX;AACA,MAAI,KAAJ;AACA,WAAS,CAAT,EAAY,YAAZ,EACE,CAAE,CAAE,IAAF,EAAQ,CAAR,CAAF,EACE,CAAE,MAAF,CADF,EAEE,CAAE,oBAAF,EAAwB,CAAxB,CAFF,EAGE,CAAE,OAAF,EAAW,mBAAX,CAHF,EAIE,CAAE,MAAF,CAJF,CADF;AAMD,CA1BD","file":"progress-bar-compiled.js","sourcesContent":["\"use strict\"\nvar test = require(\"tap\").test\nvar ProgressBar = require(\"../progress-bar.js\")\n\nvar cursor = []\nvar C\nvar bar = new ProgressBar({theme: ProgressBar.ascii, maxUpdateFrequency: 0}, C = {\n  show: function () {\n    cursor.push([\"show\"])\n    return C\n  },\n  hide: function () {\n    cursor.push([\"hide\"])\n    return C\n  },\n  up: function (lines) {\n    cursor.push([\"up\",lines])\n    return C\n  },\n  horizontalAbsolute: function (col) {\n    cursor.push([\"horizontalAbsolute\", col])\n    return C\n  },\n  eraseLine: function () {\n    cursor.push([\"eraseLine\"])\n    return C\n  },\n  write: function (line) {\n    cursor.push([\"write\", line])\n    return C\n  }\n})\n\n\nfunction isOutput(t, msg, output) {\n  var tests = []\n  for (var ii = 0; ii<output.length; ++ii) {\n    for (var jj = 0; jj<output[ii].length; ++jj) {\n      tests.push({cmd: ii, arg: jj})\n    }\n  }\n  tests.forEach(function(test) {\n    t.is(cursor[test.cmd] ? cursor[test.cmd][test.arg] : null,\n         output[test.cmd][test.arg],\n         msg + \": \" + output[test.cmd] + (test.arg ? \" arg #\"+test.arg : \"\"))\n  })\n}\n\ntest(\"hide\", function (t) {\n  t.plan(11)\n  process.stderr.isTTY = false\n  bar.hide()\n  t.is(cursor.length, 0, \"We don't progress bar without a tty\")\n  cursor = []\n  process.stderr.isTTY = true\n  bar.hide()\n  isOutput(t, \"hide while not showing\",[\n    [\"show\"], // cursor\n    [\"horizontalAbsolute\",0],\n    [\"eraseLine\"]])\n  cursor = []\n  bar.showing = true\n  bar.hide()\n  isOutput(t, \"hide while showing\",[\n    [\"show\"], // cursor\n    [\"up\", 1],\n    [\"horizontalAbsolute\",0],\n    [\"eraseLine\"]])\n})\n\ntest(\"renderTemplate\", function (t) {\n  t.plan(16)\n  process.stdout.columns = 11\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"name\"}],{name: \"NAME\"})\n  t.is(result, \"NAME\", \"name substitution\")\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"completionbar\"}],{completed: 0})\n  t.is(result, \"----------\", \"0% bar\")\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"completionbar\"}],{completed: 0.5})\n  t.is(result, \"#####-----\", \"50% bar\")\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"completionbar\"}],{completed: 1})\n  t.is(result, \"##########\", \"100% bar\")\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"completionbar\"}],{completed: -100})\n  t.is(result, \"----------\", \"0% underflow bar\")\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"completionbar\"}],{completed: 100})\n  t.is(result, \"##########\", \"100% overflow bar\")\n  var result = bar.renderTemplate(ProgressBar.ascii,[{type: \"name\"},{type: \"completionbar\"}],{name: \"NAME\", completed: 0.5})\n  t.is(result, \"NAME###---\", \"name + 50%\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [\"static\"], {})\n  t.is(result, \"static\", \"static text\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [\"static\",{type: \"name\"}], {name: \"NAME\"})\n  t.is(result, \"staticNAME\", \"static text + var\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [\"static\",{type: \"name\", separated: true}], {name: \"NAME\"})\n  t.is(result, \"static NAME \", \"pre-separated\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [{type: \"name\", separated: true}, \"static\"], {name: \"NAME\"})\n  t.is(result, \"NAME static\", \"post-separated\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [\"1\",{type: \"name\", separated: true}, \"2\"], {name: \"\"})\n  t.is(result, \"12\", \"separated no value\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [\"1\",{type: \"name\", separated: true}, \"2\"], {name: \"NAME\"})\n  t.is(result, \"1 NAME 2\", \"separated value\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [{type: \"spinner\"}], {spinner: 0})\n  t.is(result, \"\", \"No spinner\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [{type: \"spinner\"}], {spinner: 1})\n  t.is(result, \"\\\\\", \"Spinner 1\")\n  var result = bar.renderTemplate(ProgressBar.ascii, [{type: \"spinner\"}], {spinner: 10})\n  t.is(result, \"|\", \"Spinner 10\")\n})\n\ntest(\"show & pulse\", function (t) {\n  t.plan(23)\n\n  process.stdout.columns = 16\n  cursor = []\n  process.stderr.isTTY = false\n  bar.template[0].length = 6\n  bar.last = new Date(0)\n  bar.show(\"NAME\", 0)\n  t.is(cursor.length, 0, \"no tty, no progressbar\")\n\n  cursor = []\n  process.stderr.isTTY = true\n  bar.last = new Date(0)\n  bar.show(\"NAME\", 0.1)\n  isOutput(t, \"tty, name, completion\",\n    [ [ 'hide' ],\n      [ 'horizontalAbsolute', 0 ],\n      [ 'write', 'NAME   |#-----|\\n' ],\n      [ 'show' ] ])\n\n  bar.show(\"S\")\n  cursor = []\n  bar.last = new Date(0)\n  bar.pulse()\n  isOutput(t, \"pulsed spinner\",\n    [ [ 'up', 1 ],\n      [ 'hide' ],\n      [ 'horizontalAbsolute', 0 ],\n      [ 'write', 'S      \\\\ |----|\\n' ],\n      [ 'show' ] ])\n  cursor = []\n  bar.last = new Date(0)\n  bar.pulse(\"P\")\n  isOutput(t, \"pulsed spinner with subsection\",\n    [ [ 'up', 1 ],\n      [ 'hide' ],\n      [ 'horizontalAbsolute', 0 ],\n      [ 'write', 'S -> P | |----|\\n' ],\n      [ 'show' ] ])\n})\n\ntest(\"window resizing\", function (t) {\n  t.plan(16)\n  process.stderr.isTTY = true\n  process.stdout.columns = 32\n  bar.show(\"NAME\", 0.1)\n  cursor = []\n  bar.last = new Date(0)\n  bar.pulse()\n  isOutput(t, \"32 columns\",\n    [ [ 'up', 1 ],\n      [ 'hide' ],\n      [ 'horizontalAbsolute', 0 ],\n      [ 'write', 'NAME   / |##------------------|\\n' ],\n      [ 'show' ] ])\n\n  process.stdout.columns = 16\n  bar.show(\"NAME\", 0.5)\n  cursor = []\n  bar.last = new Date(0)\n  bar.pulse()\n  isOutput(t, \"16 columns\",\n    [ [ 'up', 1 ],\n      [ 'hide' ],\n      [ 'horizontalAbsolute', 0 ],\n      [ 'write', 'NAME   - |##--|\\n' ],\n      [ 'show' ] ]);\n});\n"]}