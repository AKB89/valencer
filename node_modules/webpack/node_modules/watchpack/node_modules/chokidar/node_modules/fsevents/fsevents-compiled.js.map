{"version":3,"sources":["fsevents.js"],"names":[],"mappings":"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","file":"fsevents-compiled.js","sourcesContent":["/*\n ** Â© 2014 by Philipp Dunkel <pip@pipobscure.com>\n ** Licensed under MIT License.\n */\n\n/* jshint node:true */\n'use strict';\n\nvar path = require('path');\nvar binary = require('node-pre-gyp');\nvar Native = require(binary.find(path.join(__dirname, 'package.json')));\n\nvar EventEmitter = require('events').EventEmitter;\nvar fs = require('fs');\nvar inherits = require('util').inherits;\n\nfunction FSEvents(path, handler) {\n  EventEmitter.call(this);\n\n  Object.defineProperty(this, '_impl', {\n    value: new Native.FSEvents(String(path || ''), handler),\n    enumerable: false,\n    writable: false\n  });\n}\n\ninherits(FSEvents, EventEmitter);\nproxies(FSEvents, Native.FSEvents);\n\nmodule.exports = watch;\nmodule.exports.getInfo = getInfo;\nmodule.exports.FSEvents = Native.FSEvents;\nmodule.exports.Constants = Native.Constants;\n\nvar defer = global.setImmediate || process.nextTick;\n\nfunction watch(path) {\n  var fse = new FSEvents(String(path || ''), handler);\n  EventEmitter.call(fse);\n  return fse;\n\n  function handler(path, flags, id) {\n    defer(function() {\n      fse.emit('fsevent', path, flags, id);\n      var info = getInfo(path, flags);\n      info.id = id;\n      if (info.event === 'moved') {\n        fs.stat(info.path, function(err, stat) {\n          info.event = (err || !stat) ? 'moved-out' : 'moved-in';\n          fse.emit('change', path, info);\n          fse.emit(info.event, path, info);\n        });\n      } else {\n        fse.emit('change', path, info);\n        fse.emit(info.event, path, info);\n      }\n    });\n  }\n}\n\nfunction proxies(ctor, target) {\n  Object.keys(target.prototype).filter(function(key) {\n    return typeof target.prototype[key] === 'function';\n  }).forEach(function(key) {\n    ctor.prototype[key] = function() {\n      this._impl[key].apply(this._impl, arguments);\n      return this;\n    }\n  });\n}\n\nfunction getFileType(flags) {\n  if (Native.Constants.kFSEventStreamEventFlagItemIsFile & flags) return 'file';\n  if (Native.Constants.kFSEventStreamEventFlagItemIsDir & flags) return 'directory';\n  if (Native.Constants.kFSEventStreamEventFlagItemIsSymlink & flags) return 'symlink';\n}\n\nfunction getEventType(flags) {\n  if (Native.Constants.kFSEventStreamEventFlagItemRemoved & flags) return 'deleted';\n  if (Native.Constants.kFSEventStreamEventFlagItemRenamed & flags) return 'moved';\n  if (Native.Constants.kFSEventStreamEventFlagItemCreated & flags) return 'created';\n  if (Native.Constants.kFSEventStreamEventFlagItemModified & flags) return 'modified';\n  if (Native.Constants.kFSEventStreamEventFlagRootChanged & flags) return 'root-changed';\n\n  return 'unknown';\n}\n\nfunction getFileChanges(flags) {\n  return {\n    inode: !! (Native.Constants.kFSEventStreamEventFlagItemInodeMetaMod & flags),\n    finder: !! (Native.Constants.kFSEventStreamEventFlagItemFinderInfoMod & flags),\n    access: !! (Native.Constants.kFSEventStreamEventFlagItemChangeOwner & flags),\n    xattrs: !! (Native.Constants.kFSEventStreamEventFlagItemXattrMod & flags)\n  };\n}\n\nfunction getInfo(path, flags) {\n  return {\n    path: path,\n    event: getEventType(flags),\n    type: getFileType(flags),\n    changes: getFileChanges(flags),\n    flags: flags\n  };\n}\n"]}