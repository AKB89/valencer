{"version":3,"sources":["progress.js"],"names":[],"mappings":"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","file":"progress-compiled.js","sourcesContent":["'use strict'\n\nvar test = require('tap').test\nvar Progress = require('are-we-there-yet')\nvar log = require('../log.js')\n\nvar actions = []\nlog.gauge = {\n  enable: function () {\n    actions.push(['enable'])\n  },\n  disable: function () {\n    actions.push(['disable'])\n  },\n  hide: function () {\n    actions.push(['hide'])\n  },\n  show: function (name, completed) {\n    actions.push(['show', name, completed])\n  },\n  pulse: function (name) {\n    actions.push(['pulse', name])\n  }\n}\n\nfunction didActions(t, msg, output) {\n  var tests = []\n  for (var ii = 0; ii < output.length; ++ ii) {\n    for (var jj = 0; jj < output[ii].length; ++ jj) {\n      tests.push({cmd: ii, arg: jj})\n    }\n  }\n  t.is(actions.length, output.length, msg)\n  tests.forEach(function (test) {\n    t.is(actions[test.cmd] ? actions[test.cmd][test.arg] : null, \n         output[test.cmd][test.arg],\n         msg + ': ' + output[test.cmd] + (test.arg ? ' arg #'+test.arg : ''))\n  })\n  actions = []\n}\n\nfunction resetTracker() {\n  log.disableProgress()\n  log.tracker = new Progress.TrackerGroup()\n  log.enableProgress()\n  actions = []\n}\n\ntest('enableProgress', function (t) {\n  t.plan(6)\n  resetTracker()\n  log.disableProgress()\n  actions = []\n  log.enableProgress()\n  didActions(t, 'enableProgress', [ [ 'enable' ], [ 'show', undefined, 0 ] ])\n  log.enableProgress()\n  didActions(t, 'enableProgress again', [])\n})\n\ntest('disableProgress', function (t) {\n  t.plan(4)\n  resetTracker()\n  log.disableProgress()\n  didActions(t, 'disableProgress', [ [ 'hide' ], [ 'disable' ] ])\n  log.disableProgress()\n  didActions(t, 'disableProgress again', [])\n})\n\ntest('showProgress', function (t) {\n  t.plan(5)\n  resetTracker()\n  log.disableProgress()\n  actions = []\n  log.showProgress('foo')\n  didActions(t, 'showProgress disabled', [])\n  log.enableProgress()\n  actions = []\n  log.showProgress('foo')\n  didActions(t, 'showProgress', [ [ 'show', 'foo', 0 ] ])\n})\n\ntest('clearProgress', function (t) {\n  t.plan(3)\n  resetTracker()\n  log.clearProgress()\n  didActions(t, 'clearProgress', [ [ 'hide' ] ])\n  log.disableProgress()\n  actions = []\n  log.clearProgress()\n  didActions(t, 'clearProgress disabled', [ ])\n})\n\ntest(\"newItem\", function (t) {\n  t.plan(12)\n  resetTracker()\n  actions = []\n  var a = log.newItem(\"test\", 10)\n  didActions(t, \"newItem\", [ [ 'show', 'test', 0 ] ])\n  a.completeWork(5)\n  didActions(t, \"newItem:completeWork\", [ [ 'show', 'test', 0.5 ] ])\n  a.finish()\n  didActions(t, \"newItem:finish\", [ [ 'show', 'test', 1 ] ])\n})\n\n// test that log objects proxy through. And test that completion status filters up\ntest(\"newGroup\", function (t) {\n  t.plan(23)\n  resetTracker()\n  var a = log.newGroup(\"newGroup\")\n  didActions(t, 'newGroup', [[ 'show', 'newGroup', 0 ]])\n  a.warn(\"test\", \"this is a test\")\n  didActions(t, \"newGroup:warn\", [ [ 'pulse', 'test' ], [ 'hide' ], [ 'show', undefined, 0 ] ])\n  var b = a.newItem(\"newGroup2\", 10)\n  didActions(t, \"newGroup:newItem\", [ [ 'show', 'newGroup2', 0 ] ])\n  b.completeWork(5)\n  didActions(t, \"newGroup:completeWork\", [ [ 'show', 'newGroup2', 0.5] ])\n  a.finish()\n  didActions(t, \"newGroup:finish\", [ [ 'show', 'newGroup', 1 ] ])\n})\n\ntest(\"newStream\", function (t) {\n  t.plan(13)\n  resetTracker()\n  var a = log.newStream(\"newStream\", 10)\n  didActions(t, \"newStream\", [ [ 'show', 'newStream', 0 ] ])\n  a.write(\"abcde\")\n  didActions(t, \"newStream\", [ [ 'show', 'newStream', 0.5 ] ])\n  a.write(\"fghij\")\n  didActions(t, \"newStream\", [ [ 'show', 'newStream', 1 ] ])\n  t.is(log.tracker.completed(), 1, \"Overall completion\")\n})\n"]}